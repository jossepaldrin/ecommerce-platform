<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GAMMA | AI Companion Commerce</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@700;800&display=swap"
        rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="./js/products.js"></script>
    <script src="./smart-search.js"></script>
    <script src="./chatbot.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #000;
            color: #fff;
            overflow-x: hidden;
        }

        /* Premium Liquid Glass Effects */
        .liquid-glass {
            background: linear-gradient(135deg,
                    rgba(255, 255, 255, 0.1) 0%,
                    rgba(255, 255, 255, 0.05) 100%);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.18);
            box-shadow:
                0 8px 32px rgba(0, 0, 0, 0.37),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .glass-card {
            background: linear-gradient(135deg,
                    rgba(255, 255, 255, 0.08) 0%,
                    rgba(255, 255, 255, 0.03) 100%);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.12);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .glass-card:hover {
            transform: translateY(-6px);
            border-color: rgba(212, 175, 55, 0.4);
            box-shadow: 0 20px 60px rgba(212, 175, 55, 0.2);
        }

        .premium-input {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(8px);
            color: #fff;
            transition: all 0.3s ease;
        }

        .premium-input:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(212, 175, 55, 0.5);
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
        }

        /* ===== Auth Bird Animations ===== */

        .bird-idle {
            animation: breathe 3s ease-in-out infinite;
        }

        @keyframes breathe {

            0%,
            100% {
                transform: scale(1) translateY(0);
            }

            50% {
                transform: scale(1.02) translateY(-3px);
            }
        }

        .bird-watching .bird-head {
            transform-origin: 130px 85px;
            animation: watchInput 0.8s ease-in-out infinite alternate;
        }

        .bird-watching .bird-eye {
            animation: eyeTrack 1s ease-in-out infinite;
            transform-origin: 135px 90px;
        }

        .bird-watching .bird-wing-front,
        .bird-watching .bird-wing-back {
            transform-origin: 80px 110px;
            animation: wingHover 1.2s ease-in-out infinite alternate;
        }

        @keyframes watchInput {
            0% {
                transform: rotate(-4deg) translateY(0);
            }

            100% {
                transform: rotate(4deg) translateY(-4px);
            }
        }

        @keyframes eyeTrack {

            0%,
            100% {
                transform: translateX(-1px);
            }

            50% {
                transform: translateX(1px);
            }
        }

        @keyframes wingHover {
            0% {
                transform: translateY(0) rotate(0deg);
            }

            100% {
                transform: translateY(3px) rotate(6deg);
            }
        }

        /* Privacy state: eyes closed + soft wing cover */
        .bird-privacy .bird-eye circle {
            opacity: 0;
        }

        .bird-privacy .bird-eyelid {
            opacity: 1;
            transition: opacity 0.2s ease;
        }

        .bird-privacy .bird-wing-front {
            transform-origin: 80px 110px;
            animation: coverEyesSoft 0.28s forwards;
        }

        @keyframes coverEyesSoft {
            from {
                transform: translate(0, 0) rotate(0deg);
            }

            to {
                transform: translate(10px, -18px) rotate(-22deg);
            }
        }

        .bird-celebrate {
            animation: celebrate 0.8s ease-in-out;
        }

        /* Editorial About Section Styles */
        .editorial-font {
            font-family: 'Playfair Display', serif;
            letter-spacing: -0.02em;
        }

        .editorial-bg {
            background-color: #F3F2EE;
            transition: background-color 0.3s ease;
        }

        /* Dark mode editorial background */
        .light-mode .editorial-bg {
            background-color: #F3F2EE;
        }

        body:not(.light-mode) .editorial-bg {
            background-color: #0a0a0a;
        }

        .editorial-text-main {
            color: #1a1a1a;
        }

        .editorial-text-heading {
            font-size: 22vw;
            line-height: 0.8;
            color: #000;
            opacity: 1;
            font-weight: 800;
            pointer-events: none;
            z-index: 0;
            white-space: nowrap;
            transition: color 0.3s ease, opacity 0.3s ease;
        }

        /* Dark mode heading */
        body:not(.light-mode) .editorial-text-heading {
            color: #fff;
            opacity: 0.05;
        }

        .grid-image-container {
            position: relative;
            overflow: hidden;
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
            background: #e5e5e5;
        }

        .grid-image-container:hover {
            transform: scale(1.02);
            z-index: 10;
        }

        .grid-image-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 1.2s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .grid-image-container:hover img {
            transform: scale(1.1);
        }

        .animation-stagger-1 {
            animation: fadeInUp 1s cubic-bezier(0.16, 1, 0.3, 1) 0.1s both;
        }

        .animation-stagger-2 {
            animation: fadeInUp 1s cubic-bezier(0.16, 1, 0.3, 1) 0.2s both;
        }

        .animation-stagger-3 {
            animation: fadeInUp 1s cubic-bezier(0.16, 1, 0.3, 1) 0.3s both;
        }

        .animation-stagger-4 {
            animation: fadeInUp 1s cubic-bezier(0.16, 1, 0.3, 1) 0.4s both;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(40px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes textReveal {
            from {
                transform: translateY(100%);
            }

            to {
                transform: translateY(0);
            }
        }

        @keyframes celebrate {

            0%,
            100% {
                transform: scale(1) rotate(0deg);
            }

            25% {
                transform: scale(1.12) rotate(-10deg);
            }

            75% {
                transform: scale(1.12) rotate(10deg);
            }
        }

        .bird-fly-away {
            animation: flyAway 1.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }

        @keyframes flyAway {
            0% {
                transform: translate(0, 0) scale(1);
                opacity: 1;
            }

            100% {
                transform: translate(150vw, -150vh) scale(0.2) rotate(-30deg);
                opacity: 0;
            }
        }

        /* Bird drop shadow for visibility in light mode */
        .bird-idle,
        .bird-watching,
        .bird-privacy,
        .bird-celebrate,
        .bird-fly-away {
            filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.3));
        }


        /* ===== Polished Add to Cart Animations ===== */

        /* Button Ripple Effect */
        .add-to-cart-btn {
            position: relative;
            overflow: hidden;
        }

        .add-to-cart-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .add-to-cart-btn:active::before {
            width: 300px;
            height: 300px;
        }

        /* Button Press Animation */
        @keyframes buttonPress {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(0.95);
            }

            100% {
                transform: scale(1);
            }
        }

        .btn-pressed {
            animation: buttonPress 0.15s cubic-bezier(0.4, 0.0, 0.2, 1);
        }

        /* Flying Product Animation */
        .flying-product {
            position: fixed;
            pointer-events: none;
            z-index: 10000;
            width: 80px;
            height: 80px;
            border-radius: 12px;
            object-fit: cover;
            filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.3));
            animation: flyToCart 0.9s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }

        @keyframes flyToCart {
            0% {
                transform: translate(0, 0) scale(1) rotate(0deg);
                opacity: 1;
            }

            100% {
                transform: translate(var(--target-x), var(--target-y)) scale(0.2) rotate(15deg);
                opacity: 0;
            }
        }

        /* Cart Pulse Animation */
        .cart-pulse {
            animation: cartPulse 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        @keyframes cartPulse {

            0%,
            100% {
                transform: scale(1);
                filter: drop-shadow(0 0 0 rgba(212, 175, 55, 0));
            }

            50% {
                transform: scale(1.15);
                filter: drop-shadow(0 0 12px rgba(212, 175, 55, 0.8));
            }
        }

        /* Badge Bounce Animation */
        .badge-bounce {
            animation: badgeBounce 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }

        @keyframes badgeBounce {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.3);
            }
        }

        @media (max-width: 768px) {
            .flying-product {
                width: 60px;
                height: 60px;
            }
        }

        /* ===== Category Menu & Hamburger ===== */

        .hamburger-btn {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 5px;
            cursor: pointer;
            padding: 8px;
            background: none;
            border: none;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            z-index: 10002;
        }

        .hamburger-btn:hover {
            transform: scale(1.05);
        }

        .hamburger-btn:active {
            transform: scale(0.95);
        }

        .hamburger-line {
            width: 22px;
            height: 3px;
            background: linear-gradient(90deg, #ffffff 0%, #f0f0f0 100%);
            border-radius: 3px;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }

        .hamburger-btn.active .hamburger-line {
            background: linear-gradient(90deg, #D4AF37 0%, #F4D03F 100%);
        }

        .hamburger-btn.active .hamburger-line:nth-child(1) {
            transform: rotate(45deg) translate(7px, 7px);
        }

        .hamburger-btn.active .hamburger-line:nth-child(2) {
            opacity: 0;
            transform: scale(0);
        }

        .hamburger-btn.active .hamburger-line:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -7px);
        }

        /* Light mode hamburger - just change line colors */
        .light-mode .hamburger-line {
            background: linear-gradient(90deg, #2a2a2a 0%, #1a1a1a 100%);
        }

        .light-mode .hamburger-btn.active .hamburger-line {
            background: linear-gradient(90deg, #D4AF37 0%, #F4D03F 100%);
        }

        /* ===== ADVANCED macOS/VisionOS SYSTEM GLASS SIDEBAR ===== */

        /* Category Drawer - True macOS/VisionOS Glass Physics */
        .category-drawer {
            position: fixed;
            top: 0;
            left: -420px;
            width: 420px;
            height: 100vh;
            z-index: 10001;
            overflow: hidden;
            transition: left 0.7s cubic-bezier(0.32, 0.72, 0, 1);

            /* Extreme multi-layer glass background with cool blue tint */
            background:
                linear-gradient(135deg,
                    rgba(255, 255, 255, 0.08) 0%,
                    rgba(200, 220, 255, 0.05) 20%,
                    rgba(255, 255, 255, 0.04) 40%,
                    rgba(180, 210, 255, 0.06) 60%,
                    rgba(255, 255, 255, 0.03) 80%,
                    rgba(220, 235, 255, 0.07) 100%),
                radial-gradient(circle at 20% 30%,
                    rgba(255, 255, 255, 0.1) 0%,
                    transparent 50%),
                radial-gradient(circle at 80% 70%,
                    rgba(200, 220, 255, 0.08) 0%,
                    transparent 50%);

            /* Extreme depth-based blur + refraction */
            backdrop-filter:
                blur(60px) saturate(220%) contrast(115%) brightness(1.08);
            -webkit-backdrop-filter:
                blur(60px) saturate(220%) contrast(115%) brightness(1.08);

            /* Curved glass edge with subtle chromatic aberration */
            border-right: 1.5px solid rgba(255, 255, 255, 0.35);
            border-radius: 0 24px 24px 0;

            /* Advanced multi-layer shadows for thick glass depth */
            box-shadow:
                /* Outer depth shadow */
                6px 0 80px rgba(0, 0, 0, 0.5),
                4px 0 50px rgba(0, 0, 0, 0.35),
                /* Mid-range diffusion */
                2px 0 30px rgba(0, 0, 0, 0.2),
                /* Inner edge highlight (top glass surface) */
                inset -2px 0 3px rgba(255, 255, 255, 0.4),
                /* Inner shadow (glass thickness) */
                inset 3px 0 4px rgba(0, 0, 0, 0.15),
                /* Blue ambient glow */
                -2px 0 40px rgba(180, 210, 255, 0.15);
        }

        /* Light refraction overlay - simulates light bending through glass */
        .category-drawer::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 0 24px 24px 0;
            /* Warping gradient to simulate refraction */
            background:
                linear-gradient(160deg,
                    rgba(255, 255, 255, 0.12) 0%,
                    transparent 15%,
                    rgba(200, 220, 255, 0.06) 25%,
                    transparent 35%,
                    rgba(255, 255, 255, 0.04) 50%,
                    transparent 65%,
                    rgba(180, 210, 255, 0.08) 80%,
                    transparent 100%);
            background-size: 400% 400%;
            animation: glassRefraction 20s ease-in-out infinite;
            pointer-events: none;
            z-index: 1;
            mix-blend-mode: overlay;
        }

        /* Internal light scattering with bloom - caustic edge highlights */
        .category-drawer::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 3px;
            height: 100%;
            /* Caustic edge highlights with cool blue tones */
            background: linear-gradient(180deg,
                    rgba(255, 255, 255, 0.6) 0%,
                    rgba(200, 230, 255, 0.5) 15%,
                    rgba(255, 255, 255, 0.3) 30%,
                    rgba(180, 220, 255, 0.4) 45%,
                    rgba(255, 255, 255, 0.35) 60%,
                    rgba(200, 230, 255, 0.45) 75%,
                    rgba(255, 255, 255, 0.5) 90%,
                    rgba(220, 240, 255, 0.6) 100%);
            filter: blur(2px);
            opacity: 0.7;
            animation: causticFlow 12s ease-in-out infinite;
            border-radius: 0 24px 24px 0;
            pointer-events: none;
            z-index: 3;
        }

        /* Light refraction animation */
        @keyframes glassRefraction {

            0%,
            100% {
                background-position: 0% 0%;
                opacity: 1;
            }

            33% {
                background-position: 50% 50%;
                opacity: 0.85;
            }

            66% {
                background-position: 100% 100%;
                opacity: 0.9;
            }
        }

        /* Caustic edge animation */
        @keyframes causticFlow {

            0%,
            100% {
                opacity: 0.6;
                filter: blur(2px);
            }

            50% {
                opacity: 0.85;
                filter: blur(1.5px);
            }
        }

        .category-drawer.open {
            left: 0;
        }

        /* Premium overlay with cool ambient gradient */
        .category-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: radial-gradient(circle at left center,
                    rgba(0, 10, 30, 0.92) 0%,
                    rgba(0, 5, 20, 0.85) 40%,
                    rgba(0, 0, 15, 0.75) 100%);
            backdrop-filter: blur(12px);
            z-index: 10000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.7s ease;
        }

        .category-overlay.visible {
            opacity: 1;
            pointer-events: all;
        }

        /* Categories heading - Floating with subtle glow */
        .category-header {
            padding: 48px 36px 36px;
            border-bottom: none;
            position: relative;
            z-index: 4;
        }

        .category-header h2 {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif;
            font-size: 32px;
            font-weight: 600;
            letter-spacing: -0.03em;
            color: rgba(255, 255, 255, 0.98);
            margin: 0;
            /* Floating glow */
            text-shadow:
                0 0 20px rgba(255, 255, 255, 0.3),
                0 2px 10px rgba(200, 220, 255, 0.4),
                0 4px 20px rgba(0, 0, 0, 0.3);
            filter: drop-shadow(0 1px 2px rgba(255, 255, 255, 0.2));
        }

        /* Menu items container */
        .category-list {
            padding: 28px 20px;
            position: relative;
            z-index: 4;
        }

        /* Individual glass capsule menu items */
        .category-item {
            padding: 20px 28px;
            margin: 12px 0;
            color: rgba(255, 255, 255, 0.92);
            cursor: pointer;
            display: flex;
            align-items: center;
            font-size: 17px;
            font-weight: 500;
            font-family: 'Inter', -apple-system, sans-serif;
            letter-spacing: -0.015em;
            border-radius: 16px;
            position: relative;
            overflow: hidden;

            /* Inner glass capsule with independent blur */
            background:
                linear-gradient(135deg,
                    rgba(255, 255, 255, 0.12) 0%,
                    rgba(200, 220, 255, 0.08) 50%,
                    rgba(255, 255, 255, 0.06) 100%);

            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);

            /* Glass thickness shadows */
            box-shadow:
                /* Outer soft glow */
                0 4px 16px rgba(0, 0, 0, 0.15),
                /* Inner highlight (top glass surface) */
                inset 0 1px 1px rgba(255, 255, 255, 0.25),
                /* Inner shadow (glass depth) */
                inset 0 -1px 2px rgba(0, 0, 0, 0.1),
                /* Subtle blue ambient */
                0 2px 8px rgba(180, 210, 255, 0.1);

            border: 1px solid rgba(255, 255, 255, 0.18);

            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        /* Hover: light passes through like liquid */
        .category-item::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 16px;
            /* Liquid light movement */
            background: radial-gradient(circle at 50% 50%,
                    rgba(200, 230, 255, 0.25) 0%,
                    rgba(255, 255, 255, 0.15) 30%,
                    transparent 70%);
            opacity: 0;
            transition: opacity 0.5s ease, transform 0.5s ease;
            pointer-events: none;
            transform: scale(0.8);
        }

        .category-item:hover {
            /* Intensified refraction */
            background:
                linear-gradient(135deg,
                    rgba(200, 230, 255, 0.2) 0%,
                    rgba(255, 255, 255, 0.15) 50%,
                    rgba(180, 220, 255, 0.18) 100%);
            color: rgba(255, 255, 255, 1);
            transform: scale(1.03) translateX(6px);

            /* Enhanced glass depth */
            box-shadow:
                0 8px 32px rgba(200, 220, 255, 0.25),
                0 4px 16px rgba(0, 0, 0, 0.2),
                inset 0 1px 2px rgba(255, 255, 255, 0.35),
                inset 0 -1px 3px rgba(0, 0, 0, 0.12),
                0 0 20px rgba(180, 210, 255, 0.2);

            border-color: rgba(200, 230, 255, 0.35);
        }

        .category-item:hover::before {
            opacity: 1;
            transform: scale(1.2);
        }

        .category-item.active {
            background:
                linear-gradient(135deg,
                    rgba(200, 230, 255, 0.25) 0%,
                    rgba(180, 220, 255, 0.18) 50%,
                    rgba(220, 240, 255, 0.22) 100%);
            color: rgba(255, 255, 255, 1);

            box-shadow:
                0 0 30px rgba(200, 230, 255, 0.35),
                0 6px 24px rgba(180, 210, 255, 0.3),
                inset 0 1px 2px rgba(255, 255, 255, 0.4),
                inset 0 -1px 3px rgba(0, 0, 0, 0.15);

            border-color: rgba(200, 230, 255, 0.45);
        }

        /* Light mode - Premium frosted glass */
        .light-mode .category-drawer {
            background:
                linear-gradient(135deg,
                    rgba(255, 255, 255, 0.75) 0%,
                    rgba(240, 248, 255, 0.68) 25%,
                    rgba(255, 255, 255, 0.72) 50%,
                    rgba(235, 245, 255, 0.7) 75%,
                    rgba(255, 255, 255, 0.78) 100%),
                radial-gradient(circle at 30% 40%,
                    rgba(255, 255, 255, 0.5) 0%,
                    transparent 60%);

            border-right-color: rgba(200, 220, 240, 0.4);

            box-shadow:
                6px 0 80px rgba(0, 0, 0, 0.15),
                4px 0 50px rgba(0, 0, 0, 0.1),
                2px 0 30px rgba(0, 0, 0, 0.08),
                inset -2px 0 3px rgba(255, 255, 255, 0.8),
                inset 3px 0 4px rgba(180, 200, 220, 0.1),
                -2px 0 40px rgba(200, 220, 255, 0.1);
        }

        .light-mode .category-drawer::after {
            background: linear-gradient(180deg,
                    rgba(200, 230, 255, 0.5) 0%,
                    rgba(255, 255, 255, 0.6) 25%,
                    rgba(180, 220, 255, 0.45) 50%,
                    rgba(255, 255, 255, 0.55) 75%,
                    rgba(220, 240, 255, 0.5) 100%);
        }

        .light-mode .category-header h2 {
            color: rgba(10, 25, 50, 0.95);
            text-shadow:
                0 0 15px rgba(255, 255, 255, 0.6),
                0 1px 3px rgba(200, 220, 255, 0.3),
                0 2px 8px rgba(0, 0, 0, 0.08);
        }

        .light-mode .category-item {
            color: rgba(10, 25, 50, 0.9);
            background:
                linear-gradient(135deg,
                    rgba(255, 255, 255, 0.5) 0%,
                    rgba(240, 248, 255, 0.4) 50%,
                    rgba(255, 255, 255, 0.45) 100%);
            border-color: rgba(200, 220, 240, 0.25);
            box-shadow:
                0 4px 16px rgba(0, 0, 0, 0.06),
                inset 0 1px 1px rgba(255, 255, 255, 0.7),
                inset 0 -1px 2px rgba(180, 200, 220, 0.08),
                0 2px 8px rgba(200, 220, 255, 0.08);
        }

        .light-mode .category-item:hover {
            background:
                linear-gradient(135deg,
                    rgba(220, 240, 255, 0.55) 0%,
                    rgba(240, 248, 255, 0.48) 50%,
                    rgba(210, 235, 255, 0.52) 100%);
            color: rgba(10, 25, 50, 0.95);
            box-shadow:
                0 8px 32px rgba(180, 210, 240, 0.2),
                0 4px 16px rgba(0, 0, 0, 0.08),
                inset 0 1px 2px rgba(255, 255, 255, 0.9),
                0 0 20px rgba(200, 220, 255, 0.15);
            border-color: rgba(180, 210, 240, 0.4);
        }

        .light-mode .category-item.active {
            background:
                linear-gradient(135deg,
                    rgba(200, 230, 255, 0.6) 0%,
                    rgba(220, 240, 255, 0.5) 50%,
                    rgba(190, 225, 255, 0.58) 100%);
            color: rgba(10, 25, 50, 0.98);
            border-color: rgba(180, 210, 240, 0.5);
        }

        /* Category Drawer - Apple Vision Pro Inspired Glass */
        .category-drawer {
            position: fixed;
            top: 0;
            left: -400px;
            width: 400px;
            height: 100vh;
            z-index: 10001;
            overflow: hidden;
            transition: left 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);

            /* Luxury liquid glass background */
            background: linear-gradient(135deg,
                    rgba(255, 255, 255, 0.12) 0%,
                    rgba(255, 255, 255, 0.06) 25%,
                    rgba(255, 255, 255, 0.09) 50%,
                    rgba(255, 255, 255, 0.04) 75%,
                    rgba(255, 255, 255, 0.1) 100%);

            /* Realistic depth-based blur */
            backdrop-filter: blur(40px) saturate(200%) contrast(110%) brightness(1.05);
            -webkit-backdrop-filter: blur(40px) saturate(200%) contrast(110%) brightness(1.05);

            /* Subtle chromatic aberration edge */
            border-right: 1px solid rgba(255, 255, 255, 0.25);

            /* Multi-layer shadow for depth */
            box-shadow:
                4px 0 60px rgba(0, 0, 0, 0.4),
                4px 0 40px rgba(0, 0, 0, 0.3),
                inset -1px 0 2px rgba(255, 255, 255, 0.3),
                inset 1px 0 2px rgba(0, 0, 0, 0.2);
        }

        /* Animated liquid shimmer overlay */
        .category-drawer::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg,
                    transparent 0%,
                    rgba(255, 255, 255, 0.03) 20%,
                    transparent 40%,
                    rgba(212, 175, 55, 0.02) 60%,
                    transparent 80%,
                    rgba(255, 255, 255, 0.04) 100%);
            background-size: 400% 400%;
            animation: liquidFlow 15s ease-in-out infinite;
            pointer-events: none;
            z-index: 1;
        }

        /* Edge glow highlight */
        .category-drawer::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 2px;
            height: 100%;
            background: linear-gradient(180deg,
                    rgba(255, 255, 255, 0.4) 0%,
                    rgba(212, 175, 55, 0.3) 30%,
                    rgba(255, 255, 255, 0.2) 50%,
                    rgba(212, 175, 55, 0.3) 70%,
                    rgba(255, 255, 255, 0.4) 100%);
            filter: blur(1px);
            opacity: 0.6;
            animation: edgeGlow 8s ease-in-out infinite alternate;
            pointer-events: none;
            z-index: 2;
        }

        @keyframes liquidFlow {

            0%,
            100% {
                background-position: 0% 0%;
                opacity: 1;
            }

            50% {
                background-position: 100% 100%;
                opacity: 0.8;
            }
        }

        @keyframes edgeGlow {
            0% {
                opacity: 0.4;
                filter: blur(1px);
            }

            100% {
                opacity: 0.7;
                filter: blur(2px);
            }
        }

        .category-drawer.open {
            left: 0;
        }

        /* Premium overlay with depth */
        .category-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: radial-gradient(circle at left center,
                    rgba(0, 0, 0, 0.85) 0%,
                    rgba(0, 0, 0, 0.75) 50%,
                    rgba(0, 0, 0, 0.6) 100%);
            backdrop-filter: blur(8px);
            z-index: 10000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.6s ease;
        }

        .category-overlay.visible {
            opacity: 1;
            pointer-events: all;
        }

        /* Categories heading - Premium typography */
        .category-header {
            padding: 40px 32px 32px;
            border-bottom: none;
            position: relative;
            z-index: 3;
        }

        .category-header h2 {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif;
            font-size: 28px;
            font-weight: 700;
            letter-spacing: -0.02em;
            color: rgba(255, 255, 255, 0.95);
            margin: 0;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        /* Menu items container */
        .category-list {
            padding: 24px 16px;
            position: relative;
            z-index: 3;
        }

        /* Individual category items - floating glass effect */
        .category-item {
            padding: 18px 24px;
            margin: 8px 0;
            color: rgba(255, 255, 255, 0.85);
            cursor: pointer;
            display: flex;
            align-items: center;
            font-size: 16px;
            font-weight: 500;
            font-family: 'Inter', -apple-system, sans-serif;
            letter-spacing: -0.01em;
            border-radius: 14px;
            border: none;
            position: relative;
            overflow: hidden;

            /* Subtle internal glass */
            background: linear-gradient(135deg,
                    rgba(255, 255, 255, 0.06) 0%,
                    rgba(255, 255, 255, 0.02) 100%);

            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        /* Hover glow effect */
        .category-item::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 14px;
            background: radial-gradient(circle at center,
                    rgba(212, 175, 55, 0.15) 0%,
                    transparent 70%);
            opacity: 0;
            transition: opacity 0.4s ease;
            pointer-events: none;
        }

        .category-item:hover {
            background: linear-gradient(135deg,
                    rgba(255, 255, 255, 0.12) 0%,
                    rgba(212, 175, 55, 0.08) 100%);
            color: rgba(255, 255, 255, 0.98);
            transform: scale(1.02) translateX(4px);
            box-shadow:
                0 8px 24px rgba(212, 175, 55, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        .category-item:hover::before {
            opacity: 1;
        }

        .category-item.active {
            background: linear-gradient(135deg,
                    rgba(212, 175, 55, 0.2) 0%,
                    rgba(244, 208, 63, 0.12) 100%);
            color: rgba(255, 255, 255, 1);
            box-shadow:
                0 0 20px rgba(212, 175, 55, 0.3),
                0 4px 16px rgba(212, 175, 55, 0.25),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }

        /* Light mode adjustments */
        .light-mode .category-drawer {
            background: linear-gradient(135deg,
                    rgba(255, 255, 255, 0.85) 0%,
                    rgba(255, 255, 255, 0.75) 25%,
                    rgba(255, 255, 255, 0.8) 50%,
                    rgba(255, 255, 255, 0.7) 75%,
                    rgba(255, 255, 255, 0.85) 100%);
            border-right-color: rgba(0, 0, 0, 0.1);
            box-shadow:
                4px 0 60px rgba(0, 0, 0, 0.12),
                4px 0 40px rgba(0, 0, 0, 0.08),
                inset -1px 0 2px rgba(255, 255, 255, 0.8),
                inset 1px 0 2px rgba(0, 0, 0, 0.05);
        }

        .light-mode .category-drawer::after {
            background: linear-gradient(180deg,
                    rgba(212, 175, 55, 0.3) 0%,
                    rgba(255, 255, 255, 0.4) 50%,
                    rgba(212, 175, 55, 0.3) 100%);
        }

        .light-mode .category-header h2 {
            color: rgba(0, 0, 0, 0.9);
            text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
        }

        .light-mode .category-item {
            color: rgba(0, 0, 0, 0.85);
            background: linear-gradient(135deg,
                    rgba(0, 0, 0, 0.03) 0%,
                    rgba(0, 0, 0, 0.01) 100%);
        }

        .light-mode .category-item:hover {
            background: linear-gradient(135deg,
                    rgba(212, 175, 55, 0.12) 0%,
                    rgba(244, 208, 63, 0.08) 100%);
            color: rgba(0, 0, 0, 0.95);
            box-shadow:
                0 8px 24px rgba(212, 175, 55, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
        }

        .light-mode .category-item.active {
            background: linear-gradient(135deg,
                    rgba(212, 175, 55, 0.18) 0%,
                    rgba(244, 208, 63, 0.12) 100%);
            color: rgba(0, 0, 0, 0.95);
        }

        /* ===== User Profile Panel ===== */

        .profile-panel {
            position: fixed;
            top: 0;
            right: -420px;
            width: 420px;
            height: 100vh;
            background: linear-gradient(180deg, #1a1a1a 0%, #0a0a0a 100%);
            backdrop-filter: blur(24px);
            -webkit-backdrop-filter: blur(24px);
            z-index: 10001;
            box-shadow: -4px 0 24px rgba(0, 0, 0, 0.5);
            transition: right 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            overflow-y: auto;
            border-left: 1px solid rgba(255, 255, 255, 0.1);
        }

        .profile-panel.open {
            right: 0;
        }

        .profile-panel-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(4px);
            z-index: 10000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.4s ease;
        }

        .profile-panel-overlay.visible {
            opacity: 1;
            pointer-events: all;
        }

        .profile-header {
            padding: 32px 24px;
            background: linear-gradient(135deg,
                    rgba(212, 175, 55, 0.15) 0%,
                    rgba(244, 208, 63, 0.08) 100%);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #D4AF37, #F4D03F);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            font-weight: 700;
            color: #000;
            margin: 0 auto 16px;
            box-shadow: 0 8px 24px rgba(212, 175, 55, 0.3);
            border: 3px solid rgba(255, 255, 255, 0.2);
        }

        .profile-name {
            font-family: 'Playfair Display', serif;
            font-size: 24px;
            font-weight: 700;
            color: white;
            text-align: center;
            margin: 0 0 4px 0;
        }

        .profile-email {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.6);
            text-align: center;
            margin: 0;
        }

        .profile-content {
            padding: 24px 0;
        }

        .settings-section {
            margin-bottom: 8px;
        }

        .section-title {
            font-size: 11px;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.5);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            padding: 16px 24px 8px;
            margin: 0;
        }

        .settings-item {
            padding: 14px 24px;
            display: flex;
            align-items: center;
            color: rgba(255, 255, 255, 0.85);
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }

        .settings-item:hover {
            background: rgba(255, 255, 255, 0.05);
            color: #d4af37;
            border-left-color: #d4af37;
        }

        .settings-item-icon {
            font-size: 20px;
            width: 28px;
            text-align: center;
            opacity: 0.8;
        }

        .settings-item-content {
            flex: 1;
        }

        .settings-item-title {
            font-size: 15px;
            font-weight: 500;
            margin: 0 0 2px 0;
        }

        .settings-item-subtitle {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.5);
            margin: 0;
        }

        .logout-section {
            padding: 24px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 16px;
        }

        .logout-btn {
            width: 100%;
            padding: 14px 20px;
            background: linear-gradient(135deg,
                    rgba(239, 68, 68, 0.15) 0%,
                    rgba(220, 38, 38, 0.1) 100%);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 12px;
            color: #ef4444;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .logout-btn:hover {
            background: linear-gradient(135deg,
                    rgba(239, 68, 68, 0.25) 0%,
                    rgba(220, 38, 38, 0.15) 100%);
            border-color: rgba(239, 68, 68, 0.5);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.2);
        }

        .logout-btn:active {
            transform: translateY(0) scale(0.98);
        }

        /* Light mode profile panel */
        .light-mode .profile-panel {
            background: linear-gradient(180deg, #ffffff 0%, #f9fafb 100%);
            border-left-color: rgba(0, 0, 0, 0.1);
        }

        .light-mode .profile-header {
            background: linear-gradient(135deg,
                    rgba(212, 175, 55, 0.08) 0%,
                    rgba(244, 208, 63, 0.04) 100%);
            border-bottom-color: rgba(0, 0, 0, 0.1);
        }

        .light-mode .profile-name {
            color: #1a1a1a;
        }

        .light-mode .profile-email {
            color: rgba(0, 0, 0, 0.6);
        }

        .light-mode .section-title {
            color: rgba(0, 0, 0, 0.5);
        }

        .light-mode .settings-item {
            color: rgba(0, 0, 0, 0.85);
        }

        .light-mode .settings-item:hover {
            background: rgba(0, 0, 0, 0.03);
        }

        .light-mode .settings-item-subtitle {
            color: rgba(0, 0, 0, 0.5);
        }

        .light-mode .logout-section {
            border-top-color: rgba(0, 0, 0, 0.1);
        }

        /* Ambient Background */
        .ambient-blob {
            position: fixed;
            border-radius: 50%;
            filter: blur(100px);
            opacity: 0.12;
            pointer-events: none;
            z-index: 0;
        }

        .blob-1 {
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, #D4AF37, transparent);
            top: -150px;
            left: -150px;
        }

        .blob-2 {
            width: 450px;
            height: 450px;
            background: radial-gradient(circle, #F4D03F, transparent);
            bottom: -100px;
            right: -100px;
        }

        /* Premium Button */
        .premium-btn {
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .premium-btn::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg,
                    rgba(255, 255, 255, 0.4),
                    transparent 60%);
            transform: translateX(-100%);
            transition: transform 0.6s ease;
        }

        .premium-btn:hover::before {
            transform: translateX(100%);
        }

        .premium-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(212, 175, 55, 0.4);
        }

        /* ===== PREMIUM HEADER STYLES ===== */
        nav.premium-header {
            position: sticky !important;
            top: 0 !important;
            z-index: 1000 !important;
            background: rgba(255, 255, 255, 0.95) !important;
            backdrop-filter: blur(24px) saturate(180%) !important;
            -webkit-backdrop-filter: blur(24px) saturate(180%) !important;
            border-bottom: 1px solid rgba(0, 0, 0, 0.08) !important;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05) !important;
            height: 72px;
            display: flex;
            align-items: center;
        }

        /* Dark mode header */
        body:not(.light-mode) nav.premium-header {
            background: rgba(0, 0, 0, 0.85) !important;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3) !important;
        }

        /* Ensure high contrast for header elements */
        .light-mode nav.premium-header h1,
        .light-mode nav.premium-header button {
            color: #1a1a1a !important;
        }

        .light-mode nav.premium-header button:hover {
            color: #D4AF37 !important;
        }

        /* ===== LUXURY BANNER CAROUSEL ===== */
        .banner-carousel-container {
            position: relative;
            width: 100%;
            max-width: 1400px;
            margin: 96px auto 40px auto;
            /* Top margin accounts for header + spacing */
            height: 420px;
            overflow: hidden;
            border-radius: 24px;
            cursor: pointer;
            /* Premium depth and containment */
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
            /* Ensure strict containment */
            contain: layout style paint;
        }

        .banner-carousel-track {
            display: flex;
            height: 100%;
            transition: transform 0.7s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            will-change: transform;
        }

        .banner-slide {
            min-width: 100%;
            height: 100%;
            position: relative;
            display: flex;
            align-items: center;
            padding: clamp(24px, 4vh, 32px) clamp(40px, 8vw, 80px);
            border-radius: 24px;
            overflow: hidden;
            transition: transform 0.7s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .banner-carousel-container:hover .banner-slide {
            transform: scale(1.02);
        }

        .banner-glass-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg,
                    rgba(255, 255, 255, 0.05) 0%,
                    transparent 100%);
            backdrop-filter: blur(10px);
            pointer-events: none;
        }

        .banner-content {
            position: relative;
            z-index: 2;
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 0 clamp(40px, 8vw, 80px);
        }

        .banner-text-section {
            max-width: 650px;
            width: 100%;
            text-align: left;
        }

        .banner-subtitle {
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.2em;
            margin-bottom: 8px;
            opacity: 0.8;
        }

        .banner-title {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            font-size: 56px;
            font-weight: 700;
            line-height: 1.1;
            margin: 0 0 4px 0;
            letter-spacing: -0.02em;
            max-width: 100%;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .banner-title-highlight {
            font-style: italic;
            position: relative;
        }

        .banner-discount {
            font-size: 68px;
            font-weight: 900;
            line-height: 1;
            margin: 4px 0 6px 0;
            letter-spacing: -0.03em;
            text-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            max-width: 100%;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .banner-description {
            font-size: 15px;
            line-height: 1.6;
            margin: 0 0 12px 0;
            max-width: 500px;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .banner-countdown {
            margin: 8px 0;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .sale-ends-label {
            font-size: 10px;
            font-weight: 700;
            letter-spacing: 0.15em;
            opacity: 0.7;
        }

        .countdown-timers {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .countdown-box {
            background: rgba(255, 255, 255, 0.12);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 12px 16px;
            min-width: 70px;
            text-align: center;
        }

        .countdown-value {
            font-size: 32px;
            font-weight: 700;
            line-height: 1;
            margin-bottom: 4px;
        }

        .countdown-label {
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            opacity: 0.7;
        }

        .countdown-separator {
            font-size: 24px;
            font-weight: 700;
            opacity: 0.5;
        }

        .banner-shop-btn {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            padding: 16px 48px;
            border-radius: 50px;
            font-size: 14px;
            font-weight: 700;
            letter-spacing: 0.15em;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            /* Apple-style easing */
            position: relative;
            overflow: hidden;
            color: inherit;
            /* Depth layering - CTA button on top */
            z-index: 3;
        }

        .banner-shop-btn::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg,
                    rgba(255, 255, 255, 0.2) 0%,
                    transparent 100%);
            transform: translateX(-100%);
            transition: transform 0.5s ease;
        }

        .banner-shop-btn:hover {
            transform: translateY(-3px) scale(1.05);
            background: rgba(255, 255, 255, 0.25);
            border-color: rgba(255, 255, 255, 0.5);
            /* Hover elevation + soft glow */
            box-shadow: 0 12px 32px rgba(0, 0, 0, 0.3), 0 0 20px rgba(255, 255, 255, 0.2);
            filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.3));
        }

        .banner-shop-btn:hover::before {
            transform: translateX(100%);
        }

        .banner-shop-btn:active {
            transform: translateY(-1px) scale(1.02);
        }

        .banner-decorative-circle {
            display: none;
            /* Removed to eliminate awkward empty space */
        }

        /* Navigation Arrows - Positioned outside content area */
        .carousel-nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            z-index: 10;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.25);
            width: 56px;
            height: 56px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            /* Apple-style easing */
            color: white;
            opacity: 0.8;
        }

        .carousel-nav-btn:hover {
            opacity: 1;
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.4);
            transform: translateY(-50%) scale(1.1);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
        }

        .carousel-prev {
            left: 32px;
        }

        .carousel-next {
            right: 32px;
        }

        /* Pagination Dots - Centered and properly aligned */
        .carousel-dots {
            position: absolute;
            bottom: 16px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 12px;
            z-index: 10;
            align-items: center;
            justify-content: center;
        }

        .carousel-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 0;
        }

        .carousel-dot:hover {
            background: rgba(255, 255, 255, 0.5);
            transform: scale(1.2);
        }

        .carousel-dot.active {
            width: 32px;
            border-radius: 4px;
            background: rgba(255, 255, 255, 0.9);
            box-shadow: 0 2px 8px rgba(255, 255, 255, 0.3);
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .banner-carousel-container {
                height: 360px;
                margin: 80px 16px 20px 16px;
                /* Account for header */
            }

            .banner-slide {
                padding: 48px;
                /* Tablet safe margins */
            }

            .banner-title {
                font-size: 42px;
            }

            .banner-discount {
                font-size: 52px;
            }

            .carousel-nav-btn {
                width: 48px;
                height: 48px;
            }
        }

        @media (max-width: 768px) {
            .banner-carousel-container {
                height: 480px;
                border-radius: 16px;
                margin: 80px 12px 20px 12px;
                /* Account for header */
            }

            .banner-slide {
                padding: 32px 24px;
                /* Mobile safe margins */
                flex-direction: column;
                justify-content: center;
            }

            .banner-text-section {
                max-width: 100%;
                text-align: center;
            }

            .banner-title {
                font-size: 36px;
            }

            .banner-discount {
                font-size: 48px;
            }

            .banner-description {
                max-width: 100%;
                font-size: 14px;
            }

            .banner-countdown {
                align-items: center;
            }

            .countdown-box {
                min-width: 60px;
                padding: 10px 12px;
            }

            .countdown-value {
                font-size: 24px;
            }

            .banner-decorative-circle {
                width: 300px;
                height: 300px;
                right: -80px;
            }

            .carousel-nav-btn {
                width: 40px;
                height: 40px;
            }

            .carousel-prev {
                left: 12px;
            }

            .carousel-next {
                right: 12px;
            }
        }

        /* Cart Badge */
        .cart-badge {
            position: absolute;
            top: -6px;
            right: -6px;
            min-width: 18px;
            height: 18px;
            background: linear-gradient(135deg, #D4AF37, #F4D03F);
            border-radius: 9px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: 700;
            color: #000;
            padding: 0 4px;
        }

        /* Overlays */
        .success-overlay {
            background: radial-gradient(circle at center,
                    rgba(212, 175, 55, 0.15),
                    rgba(0, 0, 0, 0.97));
            backdrop-filter: blur(12px);
        }

        /* macOS style openings */
        @keyframes macOpen {
            0% {
                opacity: 0;
                transform: scale(0.92) translateY(10px);
                filter: blur(10px);
            }

            60% {
                opacity: 1;
                transform: scale(1.02) translateY(0);
                filter: blur(0);
            }

            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes macSlideIn {
            0% {
                opacity: 0;
                transform: translateX(40px);
            }

            100% {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ====================== LIGHT MODE ====================== */
        body.light-mode {
            background: #FAFAF9;
            color: #1a1a1a;
        }

        .light-mode .liquid-glass {
            background: linear-gradient(135deg,
                    rgba(255, 255, 255, 0.95) 0%,
                    rgba(255, 255, 255, 0.85) 100%);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid rgba(0, 0, 0, 0.08);
            box-shadow:
                0 8px 32px rgba(0, 0, 0, 0.08),
                inset 0 1px 0 rgba(255, 255, 255, 0.5);
        }

        .light-mode .glass-card {
            background: linear-gradient(135deg,
                    rgba(255, 255, 255, 0.9) 0%,
                    rgba(255, 255, 255, 0.7) 100%);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(0, 0, 0, 0.06);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.04);
        }

        .light-mode .glass-card:hover {
            transform: translateY(-6px);
            border-color: rgba(212, 175, 55, 0.3);
            box-shadow: 0 20px 60px rgba(212, 175, 55, 0.15);
        }

        .light-mode .premium-input {
            background: rgba(0, 0, 0, 0.03);
            border: 1px solid rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(8px);
            color: #1a1a1a;
        }

        .light-mode .premium-input::placeholder {
            color: #9ca3af;
        }

        .light-mode .premium-input:focus {
            outline: none;
            background: rgba(0, 0, 0, 0.05);
            border-color: rgba(212, 175, 55, 0.4);
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
        }

        .light-mode .ambient-blob {
            opacity: 0.06;
        }

        .light-mode .blob-1 {
            background: radial-gradient(circle, #D4AF37, transparent);
        }

        .light-mode .blob-2 {
            background: radial-gradient(circle, #F4D03F, transparent);
        }

        .light-mode .premium-btn:hover {
            box-shadow: 0 15px 40px rgba(212, 175, 55, 0.3);
        }

        .light-mode .success-overlay {
            background: radial-gradient(circle at center,
                    rgba(212, 175, 55, 0.08),
                    rgba(255, 255, 255, 0.95));
            backdrop-filter: blur(12px);
        }

        /* Light mode - ALL sections get white/light background */
        .light-mode section,
        .light-mode .min-h-screen,
        .light-mode div[class*="bg-black"] {
            background: #FFFFFF !important;
        }

        /* Light mode text colors */
        .light-mode h1,
        .light-mode h2,
        .light-mode h3,
        .light-mode .text-white {
            color: #1a1a1a !important;
        }

        .light-mode .text-gray-300,
        .light-mode .text-gray-200 {
            color: #4b5563 !important;
        }

        .light-mode .text-gray-400 {
            color: #6b7280 !important;
        }

        .light-mode .text-gray-500 {
            color: #9ca3af !important;
        }

        /* Navbar in light mode */
        .light-mode nav {
            background: rgba(255, 255, 255, 0.95) !important;
            border-bottom: 1px solid rgba(0, 0, 0, 0.08) !important;
        }

        .light-mode nav button,
        .light-mode nav a {
            color: #1a1a1a !important;
        }

        .light-mode nav button:hover,
        .light-mode nav a:hover {
            color: #D4AF37 !important;
        }

        /* Hero section in light mode */
        .light-mode section {
            background: #FFFFFF !important;
        }

        /* Product cards in light mode */
        .light-mode .glass-card {
            background: linear-gradient(135deg,
                    rgba(255, 255, 255, 0.75) 0%,
                    rgba(255, 255, 255, 0.55) 100%) !important;
            backdrop-filter: blur(20px) saturate(180%) !important;
            -webkit-backdrop-filter: blur(20px) saturate(180%) !important;
            border: 1px solid rgba(255, 255, 255, 0.4) !important;
            box-shadow:
                0 8px 32px rgba(31, 38, 135, 0.12),
                0 2px 8px rgba(0, 0, 0, 0.04),
                inset 0 1px 0 rgba(255, 255, 255, 0.8) !important;
        }

        .light-mode .glass-card:hover {
            background: linear-gradient(135deg,
                    rgba(255, 255, 255, 0.85) 0%,
                    rgba(255, 255, 255, 0.65) 100%) !important;
            transform: translateY(-6px);
            border-color: rgba(212, 175, 55, 0.4) !important;
            box-shadow:
                0 20px 60px rgba(212, 175, 55, 0.2),
                0 8px 16px rgba(0, 0, 0, 0.08),
                inset 0 1px 0 rgba(255, 255, 255, 0.9) !important;
        }

        .light-mode .glass-card h3 {
            color: #1a1a1a !important;
        }

        .light-mode .glass-card p {
            color: #4b5563 !important;
        }

        .light-mode .glass-card img {
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
        }

        /* Buttons in light mode */
        .light-mode button.border {
            border-color: rgba(0, 0, 0, 0.15) !important;
            color: #1a1a1a !important;
        }

        .light-mode button.border:hover {
            background: rgba(0, 0, 0, 0.05) !important;
        }

        /* Footer in light mode */
        .light-mode footer {
            border-top: 1px solid rgba(0, 0, 0, 0.08) !important;
            background: #FFFFFF !important;
        }

        /* Modals and overlays in light mode */
        .light-mode .liquid-glass h1,
        .light-mode .liquid-glass h2,
        .light-mode .liquid-glass h3 {
            color: #1a1a1a !important;
        }

        .light-mode .liquid-glass p {
            color: #4b5563 !important;
        }

        /* Cart drawer in light mode */
        .light-mode .max-w-md.h-full {
            background: linear-gradient(135deg,
                    rgba(255, 255, 255, 0.85) 0%,
                    rgba(255, 255, 255, 0.75) 100%) !important;
            backdrop-filter: blur(24px) saturate(180%) !important;
            -webkit-backdrop-filter: blur(24px) saturate(180%) !important;
            border-left: 1px solid rgba(255, 255, 255, 0.5) !important;
            box-shadow: -8px 0 32px rgba(0, 0, 0, 0.1) !important;
        }

        /* Cart badge in light mode */
        .light-mode .cart-badge {
            background: linear-gradient(135deg, #D4AF37, #F4D03F);
            color: #000;
        }

        /* About section cards in light mode */
        .light-mode .glass-card.rounded-2xl {
            background: linear-gradient(135deg,
                    rgba(255, 255, 255, 0.75) 0%,
                    rgba(255, 255, 255, 0.55) 100%) !important;
            backdrop-filter: blur(20px) saturate(180%) !important;
            -webkit-backdrop-filter: blur(20px) saturate(180%) !important;
            border: 1px solid rgba(255, 255, 255, 0.4) !important;
            box-shadow:
                0 8px 32px rgba(31, 38, 135, 0.12),
                0 2px 8px rgba(0, 0, 0, 0.04),
                inset 0 1px 0 rgba(255, 255, 255, 0.8) !important;
        }

        /* ====================== LIQUID GLASS REFRACTION ====================== */

        .liquid-refraction {
            position: relative;
            backdrop-filter: blur(40px) saturate(200%) contrast(120%);
            -webkit-backdrop-filter: blur(40px) saturate(200%) contrast(120%);
            filter: brightness(1.1);

            /* Light refraction gradient */
            background: linear-gradient(135deg,
                    rgba(255, 255, 255, 0.15) 0%,
                    rgba(255, 255, 255, 0.05) 50%,
                    rgba(255, 255, 255, 0.2) 100%);

            /* Chromatic aberration and depth */
            box-shadow: 0 0 30px rgba(212, 175, 55, 0.4),
                0 8px 32px rgba(0, 0, 0, 0.3),
                inset 0 2px 0 rgba(255, 255, 255, 0.7),
                inset 0 -2px 0 rgba(0, 0, 0, 0.3);

            /* 3D perspective */
            transform: perspective(1000px) translateZ(0);
            transform-style: preserve-3d;

            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 24px;
        }

        .liquid-refraction::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 24px;
            background: linear-gradient(45deg,
                    transparent 0%,
                    rgba(255, 255, 255, 0.1) 25%,
                    transparent 50%,
                    rgba(255, 255, 255, 0.1) 75%,
                    transparent 100%);
            background-size: 200% 200%;
            animation: glassShimmer 8s ease-in-out infinite;
            pointer-events: none;
            mix-blend-mode: overlay;
        }

        .liquid-refraction::after {
            content: '';
            position: absolute;
            inset: -2px;
            border-radius: 26px;
            background: linear-gradient(135deg,
                    rgba(212, 175, 55, 0.3) 0%,
                    transparent 30%,
                    transparent 70%,
                    rgba(244, 208, 63, 0.3) 100%);
            filter: blur(20px);
            opacity: 0.6;
            z-index: -1;
            animation: glassGlow 6s ease-in-out infinite alternate;
        }

        @keyframes glassShimmer {

            0%,
            100% {
                background-position: 0% 0%;
                opacity: 0.5;
            }

            50% {
                background-position: 100% 100%;
                opacity: 0.8;
            }
        }

        @keyframes glassGlow {
            0% {
                opacity: 0.4;
                filter: blur(20px);
            }

            100% {
                opacity: 0.7;
                filter: blur(30px);
            }
        }

        /* Light mode liquid glass */
        .light-mode .liquid-refraction {
            background: linear-gradient(135deg,
                    rgba(255, 255, 255, 0.4) 0%,
                    rgba(255, 255, 255, 0.2) 50%,
                    rgba(255, 255, 255, 0.5) 100%);
            box-shadow: 0 0 30px rgba(212, 175, 55, 0.3),
                0 8px 32px rgba(0, 0, 0, 0.15),
                inset 0 2px 0 rgba(255, 255, 255, 0.9),
                inset 0 -2px 0 rgba(0, 0, 0, 0.1);
        }

        /* Countdown timer styles */
        .countdown-digit {
            display: inline-block;
            min-width: 60px;
            padding: 12px 16px;
            background: linear-gradient(135deg,
                    rgba(212, 175, 55, 0.2) 0%,
                    rgba(244, 208, 63, 0.1) 100%);
            border: 2px solid rgba(212, 175, 55, 0.4);
            border-radius: 12px;
            font-size: 2rem;
            font-weight: 700;
            text-align: center;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 16px rgba(212, 175, 55, 0.3);
            animation: digitPulse 1s ease-in-out infinite;
        }

        @keyframes digitPulse {

            0%,
            100% {
                transform: scale(1);
                box-shadow: 0 4px 16px rgba(212, 175, 55, 0.3);
            }

            50% {
                transform: scale(1.05);
                box-shadow: 0 6px 20px rgba(212, 175, 55, 0.5);
            }
        }

        /* Offer card slide animation - smooth infinite loop */
        .offer-card {
            animation: slideCarousel 30s linear infinite;
            display: flex;
            gap: 1.5rem;
        }

        @keyframes slideCarousel {
            0% {
                transform: translateX(0);
            }

            100% {
                transform: translateX(-50%);
            }
        }

        .offer-card:hover {
            animation-play-state: paused;
        }

        /* Theme toggle button */
        .theme-toggle {
            position: relative;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .theme-toggle:hover {
            transform: rotate(20deg) scale(1.1);
        }

        /* Carousel Navigation Arrows */
        .carousel-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            z-index: 20;
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.9), rgba(244, 208, 63, 0.9));
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            width: 56px;
            height: 56px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            color: #000;
            font-weight: bold;
            box-shadow: 0 8px 24px rgba(212, 175, 55, 0.4);
        }

        .carousel-arrow:hover {
            background: linear-gradient(135deg, rgba(212, 175, 55, 1), rgba(244, 208, 63, 1));
            transform: translateY(-50%) scale(1.15);
            box-shadow: 0 12px 32px rgba(212, 175, 55, 0.6);
            border-color: rgba(255, 255, 255, 0.5);
        }

        .carousel-arrow:active {
            transform: translateY(-50%) scale(0.95);
        }

        .carousel-arrow-left {
            left: 16px;
        }

        .carousel-arrow-right {
            right: 16px;
        }

        @media (max-width: 768px) {
            .carousel-arrow {
                width: 44px;
                height: 44px;
            }

            .carousel-arrow-left {
                left: 8px;
            }

            .carousel-arrow-right {
                right: 8px;
            }
        }

        /* Hide scrollbar */
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }

        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>

<body class="light-mode">
    <div id="root"></div>

    <!-- Load product data -->


    <script type="text/babel">
        const { useState, useRef } = React;

        /* ====================== DATA ====================== */
        // Products and Categories are now loaded from products.js
        /* const PRODUCTS = [
            {
                id: 1,
                name: "Obsidian Smart Pack",
                price: 249,
                category: "Bags",
                image: "https://images.unsplash.com/photo-1553062407-98eeb64c6a62?auto=format&fit=crop&w=600&q=80",
                rating: 4.8,
                reviews: 342,
                description: "Ballistic nylon backpack with GPS tracking, RFID protection, and USB-C passthrough for the modern traveler.",
                features: ["GPS Tracker", "RFID Protection", "Water Resistant", "24L Capacity", "USB-C Port"],
                stock: 15,
                tag: "Core"
            },
            {
                id: 2,
                name: "Carbon Carry-On",
                price: 495,
                category: "Luggage",
                image: "https://images.unsplash.com/photo-1565026057447-bc27e38c4844?auto=format&fit=crop&w=600&q=80",
                rating: 4.9,
                reviews: 567,
                description: "Ultra-light forged carbon fiber shell with 360 silent wheels and TSA-approved lock.",
                features: ["Carbon Fiber", "TSA Lock", "Silent Wheels", "38L Volume", "10yr Warranty"],
                stock: 8,
                tag: "New"
            },
            {
                id: 3,
                name: "Executive Adapter",
                price: 85,
                category: "Tech",
                image: "https://images.unsplash.com/photo-1517336714731-489689fd1ca8?auto=format&fit=crop&w=900&q=80",
                rating: 4.7,
                reviews: 891,
                description: "Universal power adapter with dual USB-C fast charging for 150+ countries.",
                features: ["150+ Countries", "35W Output", "Surge Protection", "Compact Design", "Travel Case"],
                stock: 42,
                tag: "Travel"
            },
            {
                id: 4,
                name: "Silence Pro",
                price: 399,
                category: "Audio",
                image: "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?auto=format&fit=crop&w=600&q=80",
                rating: 4.9,
                reviews: 1203,
                description: "Studio-quality noise cancellation with 35-hour battery and memory foam cushions.",
                features: ["Active ANC", "40mm Drivers", "35hr Battery", "Multi-point", "Memory Foam"],
                stock: 23,
                tag: "New"
            },
            {
                id: 5,
                name: "Meridian Watch",
                price: 650,
                category: "Accessories",
                image: "https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&fit=crop&w=600&q=80",
                rating: 4.9,
                reviews: 723,
                description: "Swiss automatic movement with sapphire crystal and 100m water resistance.",
                features: ["Automatic", "Sapphire Crystal", "100m Water Resist", "Exhibition Back", "42mm Case"],
                stock: 12,
                tag: "Core"
            },
            {
                id: 6,
                name: "Leather Tech Kit",
                price: 120,
                category: "Accessories",
                image: "https://images.unsplash.com/photo-1553531384-cc64ac80f931?auto=format&fit=crop&w=600&q=80",
                rating: 4.8,
                reviews: 445,
                description: "Italian leather cable organizer with elastic loops and YKK zipper.",
                features: ["Italian Leather", "Cable Management", "YKK Zipper", "Compact", "Microfiber Lining"],
                stock: 31,
                tag: "Travel"
            },
            {
                id: 7,
                name: "Aurora Wallet",
                price: 180,
                category: "Accessories",
                image: "https://images.unsplash.com/photo-1627123424574-724758594e93?auto=format&fit=crop&w=600&q=80",
                rating: 4.7,
                reviews: 289,
                description: "RFID-blocking wallet with carbon fiber exterior and 8 card slots.",
                features: ["RFID Blocking", "Carbon Fiber", "8 Card Slots", "Slim Design", "Money Clip"],
                stock: 27,
                tag: "New"
            },
            {
                id: 8,
                name: "Summit Jacket",
                price: 380,
                category: "Apparel",
                image: "https://images.unsplash.com/photo-1551028719-00167b16eac5?auto=format&fit=crop&w=600&q=80",
                rating: 4.8,
                reviews: 512,
                description: "3-layer Gore-Tex shell with taped seams and packable hood.",
                features: ["Gore-Tex", "Taped Seams", "Pit Zips", "Packable Hood", "Lifetime Guarantee"],
                stock: 18,
                tag: "Travel"
            },
            {
                id: 9,
                name: "Titanium Pen",
                price: 95,
                category: "Accessories",
                image: "https://images.unsplash.com/photo-1586075010923-2dd4570fb338?auto=format&fit=crop&w=600&q=80",
                rating: 4.6,
                reviews: 234,
                description: "Aerospace-grade titanium pen with Schmidt refill and bolt-action mechanism.",
                features: ["Titanium Body", "Schmidt Refill", "Bolt Action", "Lifetime Warranty", "Gift Box"],
                stock: 45,
                tag: "Core"
            }
        ]; */

        /* ====================== ICONS ====================== */
        const Icons = {
            Cart: ({ className = "w-5 h-5" }) => (
                <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <circle cx="9" cy="21" r="1" /><circle cx="20" cy="21" r="1" />
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={1.5}
                        d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6" />
                </svg>
            ),
            User: ({ className = "w-5 h-5" }) => (
                <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={1.5}
                        d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
                    <circle cx="12" cy="7" r="4" />
                </svg>
            ),
            Search: ({ className = "w-5 h-5" }) => (
                <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <circle cx="11" cy="11" r="8" />
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={1.5} d="M21 21l-4.35-4.35" />
                </svg>
            ),
            Heart: ({ className = "w-5 h-5", filled }) => (
                <svg className={className} fill={filled ? "currentColor" : "none"} stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={1.5}
                        d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" />
                </svg>
            ),
            Star: ({ className = "w-4 h-4" }) => (
                <svg className={className} fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
                </svg>
            ),
            Check: ({ className = "w-5 h-5" }) => (
                <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                </svg>
            ),
            X: ({ className = "w-5 h-5" }) => (
                <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                </svg>
            ),
            ChevronDown: ({ className = "w-5 h-5" }) => (
                <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" />
                </svg>
            ),
            Sun: ({ className = "w-5 h-5" }) => (
                <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <circle cx="12" cy="12" r="5" />
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2}
                        d="M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" />
                </svg>
            ),
            Moon: ({ className = "w-5 h-5" }) => (
                <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2}
                        d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
                </svg>
            )
        };

        /* ====================== BANNER CAROUSEL ====================== */
        const BannerCarousel = ({ onAddToCart, onCategorySelect }) => {
            const [currentSlide, setCurrentSlide] = useState(0);
            const [isHovered, setIsHovered] = useState(false);
            const [touchStart, setTouchStart] = useState(0);
            const [touchEnd, setTouchEnd] = useState(0);

            // Countdown timer state - real-time countdown
            const [countdownTime, setCountdownTime] = useState({
                hours: 0,
                minutes: 0,
                seconds: 0
            });

            // Set sale end time - 24 hours from now (can be changed to any target date)
            const [saleEndTime] = useState(() => {
                const now = new Date();
                const endTime = new Date(now.getTime() + (24 * 60 * 60 * 1000)); // 24 hours from now
                return endTime;
            });

            // Real-time countdown timer effect
            React.useEffect(() => {
                const updateCountdown = () => {
                    const now = new Date();
                    const timeRemaining = saleEndTime - now;

                    if (timeRemaining <= 0) {
                        // Sale ended - reset to 24 hours
                        const newEndTime = new Date(now.getTime() + (24 * 60 * 60 * 1000));
                        setCountdownTime({
                            hours: 24,
                            minutes: 0,
                            seconds: 0
                        });
                        // In a real scenario, you might want to update saleEndTime here
                        // or trigger some sale-ended logic
                    } else {
                        // Calculate remaining time
                        const hours = Math.floor(timeRemaining / (1000 * 60 * 60));
                        const minutes = Math.floor((timeRemaining % (1000 * 60 * 60)) / (1000 * 60));
                        const seconds = Math.floor((timeRemaining % (1000 * 60)) / 1000);

                        setCountdownTime({
                            hours: hours,
                            minutes: minutes,
                            seconds: seconds
                        });
                    }
                };

                // Update immediately on mount
                updateCountdown();

                // Update every second
                const interval = setInterval(updateCountdown, 1000);

                return () => clearInterval(interval);
            }, [saleEndTime]);

            const banners = [
                {
                    id: 1,
                    title: "Flash Sale",
                    discount: "40% OFF",
                    subtitle: "Limited Time Offer",
                    description: "Exclusive discounts on men's fashion, women's wear, and premium electronics",
                    bgGradient: "linear-gradient(135deg, #D4AF37 0%, #F4D03F 50%, #FFD700 100%)",
                    textColor: "#1a1a1a",
                    action: () => onCategorySelect && onCategorySelect('all'),
                    countdown: true
                },
                {
                    id: 2,
                    title: "Men's Fashion Edit",
                    discount: "35% OFF",
                    subtitle: "Sophisticated Style",
                    description: "Premium jackets, accessories, and refined essentials for the modern gentleman",
                    bgGradient: "linear-gradient(135deg, #2C3E50 0%, #34495E 50%, #1a252f 100%)",
                    textColor: "#ffffff",
                    action: () => onCategorySelect && onCategorySelect('men')
                },
                {
                    id: 3,
                    title: "Women's Collection",
                    discount: "45% OFF",
                    subtitle: "Elegant Essentials",
                    description: "Curated selection of timeless pieces and contemporary designs",
                    bgGradient: "linear-gradient(135deg, #E91E63 0%, #F06292 50%, #F48FB1 100%)",
                    textColor: "#ffffff",
                    action: () => onCategorySelect && onCategorySelect('women')
                },
                {
                    id: 4,
                    title: "Electronics Mega Sale",
                    discount: "50% OFF",
                    subtitle: "Tech Innovation",
                    description: "Latest gadgets, premium audio, and cutting-edge technology at unbeatable prices",
                    bgGradient: "linear-gradient(135deg, #2196F3 0%, #0D47A1 50%, #1565C0 100%)",
                    textColor: "#ffffff",
                    action: () => onCategorySelect && onCategorySelect('electronics')
                },
                {
                    id: 5,
                    title: "Weekend Special",
                    discount: "30% OFF",
                    subtitle: "Limited Edition",
                    description: "Handpicked deals on travel essentials and everyday carry items",
                    bgGradient: "linear-gradient(135deg, #9C27B0 0%, #BA68C8 50%, #CE93D8 100%)",
                    textColor: "#ffffff",
                    action: () => onCategorySelect && onCategorySelect('all')
                },
                {
                    id: 6,
                    title: "Premium Luxury",
                    discount: "25% OFF",
                    subtitle: "Exclusive Collection",
                    description: "Handcrafted leather goods, titanium accessories, and heritage pieces",
                    bgGradient: "linear-gradient(135deg, #000000 0%, #1a1a1a 50%, #2a2a2a 100%)",
                    textColor: "#ffffff", // Changed from #D4AF37 to white for visibility
                    action: () => onCategorySelect && onCategorySelect('all')
                },
                {
                    id: 7,
                    title: "Accessories & Watches",
                    discount: "40% OFF",
                    subtitle: "Refined Details",
                    description: "Wallets, pens, cable organizers, and precision timepieces",
                    bgGradient: "linear-gradient(135deg, #607D8B 0%, #455A64 50%, #37474F 100%)",
                    textColor: "#ffffff",
                    action: () => onCategorySelect && onCategorySelect('accessories')
                },
                {
                    id: 8,
                    title: "Sports & Fitness",
                    discount: "35% OFF",
                    subtitle: "Active Performance",
                    description: "Premium athletic wear and performance gear for the active lifestyle",
                    bgGradient: "linear-gradient(135deg, #FF5722 0%, #FF7043 50%, #FF8A65 100%)",
                    textColor: "#ffffff",
                    action: () => onCategorySelect && onCategorySelect('apparel')
                },
                {
                    id: 9,
                    title: "Home & Living",
                    discount: "30% OFF",
                    subtitle: "Lifestyle Essentials",
                    description: "Curated home goods and everyday essentials for modern living",
                    bgGradient: "linear-gradient(135deg, #795548 0%, #8D6E63 50%, #A1887F 100%)",
                    textColor: "#ffffff",
                    action: () => onCategorySelect && onCategorySelect('all')
                },
                {
                    id: 10,
                    title: "Seasonal Specials",
                    discount: "60% OFF",
                    subtitle: "Clearance Sale",
                    description: "End of season deals on select items - while stocks last",
                    bgGradient: "linear-gradient(135deg, #4CAF50 0%, #66BB6A 50%, #81C784 100%)",
                    textColor: "#ffffff",
                    action: () => onCategorySelect && onCategorySelect('all')
                }
            ];

            const totalSlides = banners.length;

            // Auto-slide every 2 seconds
            React.useEffect(() => {
                if (!isHovered) {
                    const interval = setInterval(() => {
                        setCurrentSlide((prev) => (prev + 1) % totalSlides);
                    }, 2000);
                    return () => clearInterval(interval);
                }
            }, [isHovered, totalSlides]);

            const nextSlide = () => {
                setCurrentSlide((prev) => (prev + 1) % totalSlides);
            };

            const prevSlide = () => {
                setCurrentSlide((prev) => (prev - 1 + totalSlides) % totalSlides);
            };

            const goToSlide = (index) => {
                setCurrentSlide(index);
            };

            // Touch swipe handlers
            const handleTouchStart = (e) => {
                setTouchStart(e.targetTouches[0].clientX);
            };

            const handleTouchMove = (e) => {
                setTouchEnd(e.targetTouches[0].clientX);
            };

            const handleTouchEnd = () => {
                if (touchStart - touchEnd > 75) {
                    nextSlide();
                }
                if (touchStart - touchEnd < -75) {
                    prevSlide();
                }
            };

            return (
                <div
                    className="banner-carousel-container"
                    onMouseEnter={() => setIsHovered(true)}
                    onMouseLeave={() => setIsHovered(false)}
                    onTouchStart={handleTouchStart}
                    onTouchMove={handleTouchMove}
                    onTouchEnd={handleTouchEnd}
                >
                    <div className="banner-carousel-track" style={{
                        transform: `translateX(-${currentSlide * 100}%)`
                    }}>
                        {banners.map((banner, index) => (
                            <div
                                key={banner.id}
                                className="banner-slide"
                                style={{
                                    background: banner.bgGradient
                                }}
                                onClick={banner.action}
                            >
                                {/* Glass overlay */}
                                <div className="banner-glass-overlay"></div>

                                <div className="banner-content">
                                    <div className="banner-text-section" style={{ color: banner.textColor }}>
                                        <div className="banner-subtitle">{banner.subtitle}</div>
                                        <h2 className="banner-title" style={{ color: 'inherit !important' }}>
                                            {banner.title.split(' ').map((word, i) => (
                                                <span key={i} className={i === banner.title.split(' ').length - 1 ? 'banner-title-highlight' : ''}>
                                                    {word}{' '}
                                                </span>
                                            ))}
                                        </h2>
                                        <div className="banner-discount">{banner.discount}</div>
                                        <p className="banner-description" style={{ opacity: 0.9 }}>
                                            {banner.description}
                                        </p>

                                        {banner.countdown && (
                                            <div className="banner-countdown">
                                                <span className="sale-ends-label">SALE ENDS IN</span>
                                                <div className="countdown-timers">
                                                    <div className="countdown-box">
                                                        <div className="countdown-value">{String(countdownTime.hours).padStart(2, '0')}</div>
                                                        <div className="countdown-label">hrs</div>
                                                    </div>
                                                    <span className="countdown-separator">:</span>
                                                    <div className="countdown-box">
                                                        <div className="countdown-value">{String(countdownTime.minutes).padStart(2, '0')}</div>
                                                        <div className="countdown-label">min</div>
                                                    </div>
                                                    <span className="countdown-separator">:</span>
                                                    <div className="countdown-box">
                                                        <div className="countdown-value">{String(countdownTime.seconds).padStart(2, '0')}</div>
                                                        <div className="countdown-label">sec</div>
                                                    </div>
                                                </div>
                                            </div>
                                        )}

                                        <button className="banner-shop-btn" onClick={(e) => {
                                            e.stopPropagation();
                                            banner.action && banner.action();
                                        }}>
                                            SHOP NOW
                                        </button>
                                    </div>

                                    {/* Decorative element */}
                                    <div className="banner-decorative-circle" style={{
                                        background: `radial-gradient(circle, ${banner.textColor}15 0%, transparent 70%)`
                                    }}></div>
                                </div>
                            </div>
                        ))}
                    </div>

                    {/* Navigation Arrows */}
                    <button className="carousel-nav-btn carousel-prev" onClick={prevSlide}>
                        <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" />
                        </svg>
                    </button>
                    <button className="carousel-nav-btn carousel-next" onClick={nextSlide}>
                        <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
                        </svg>
                    </button>

                    {/* Pagination Dots */}
                    <div className="carousel-dots">
                        {banners.map((_, index) => (
                            <button
                                key={index}
                                className={`carousel-dot ${index === currentSlide ? 'active' : ''}`}
                                onClick={() => goToSlide(index)}
                                aria-label={`Go to slide ${index + 1}`}
                            />
                        ))}
                    </div>
                </div>
            );
        };


        /* ====================== BIRD SVG ====================== */
        const BirdSVG = () => (
            <svg viewBox="0 0 200 200" className="w-full h-full">
                <g className="bird-wing-back">
                    <path d="M80,100 L40,55 L105,80 Z" fill="#B8860B" />
                </g>
                <g className="bird-body">
                    <ellipse cx="95" cy="120" rx="32" ry="38" fill="#FFFFFF" />
                </g>
                <g className="bird-head">
                    <circle cx="125" cy="93" r="23" fill="#FFFFFF" />
                    <g className="bird-beak">
                        <path d="M143,90 L170,96 L143,102 Z" fill="#D4AF37" />
                    </g>
                    <g className="bird-eye">
                        <circle cx="135" cy="90" r="4" fill="#000000" />
                        <circle cx="137" cy="88" r="1.5" fill="#FFFFFF" />
                    </g>
                    <path
                        className="bird-eyelid"
                        d="M130 90 Q135 86 140 90"
                        stroke="#000000"
                        strokeWidth="2.3"
                        strokeLinecap="round"
                        fill="none"
                        opacity="0"
                    />
                </g>
                <g className="bird-wing-front">
                    <path d="M90,110 L50,65 L118,90 Z" fill="#F4D03F" />
                </g>
            </svg>
        );


        /* ====================== AUTH SCREEN ====================== */
        const AuthScreen = ({ onLogin }) => {
            const [isSignup, setIsSignup] = useState(false);
            const [birdState, setBirdState] = useState('idle');
            const [formData, setFormData] = useState({ email: 'test@gamma.com', password: 'test123', name: 'tester', confirmPassword: 'test123' });
            const [error, setError] = useState('');

            const handleFocus = (field) => {
                if (field === 'email' || field === 'name') setBirdState('watching');
                if (field === 'password' || field === 'confirmPassword') setBirdState('privacy');
                setError('');
            };

            const handleBlur = () => setBirdState('idle');

            const validateForm = () => {
                if (!formData.email || !formData.password) {
                    setError('Please fill in all fields');
                    return false;
                }
                if (isSignup) {
                    if (!formData.name) {
                        setError('Name is required');
                        return false;
                    }
                    if (formData.password !== formData.confirmPassword) {
                        setError('Passwords do not match');
                        return false;
                    }
                    if (formData.password.length < 6) {
                        setError('Password must be at least 6 characters');
                        return false;
                    }
                }
                return true;
            };

            const handleSubmit = (e) => {
                e.preventDefault();
                setError('');

                if (!validateForm()) return;

                // Simulate backend delay and processing
                const processAuth = () => {
                    // Check local storage for existing users
                    const users = JSON.parse(localStorage.getItem('gamma_users') || '[]');

                    if (isSignup) {
                        if (users.find(u => u.email === formData.email)) {
                            setError('User already exists');
                            return;
                        }

                        const newUser = {
                            id: Date.now(),
                            name: formData.name,
                            email: formData.email,
                            password: formData.password, // In a real app, hash this!
                            joined: new Date().toISOString()
                        };

                        const updatedUsers = [...users, newUser];
                        localStorage.setItem('gamma_users', JSON.stringify(updatedUsers));

                        // Success animation
                        performSuccessAnimation(newUser);
                    } else {
                        // Special case for test user
                        if (formData.email === 'test@gamma.com' && formData.password === 'test123') {
                            const testUser = {
                                id: 'test_user_001',
                                name: 'Test User',
                                email: 'test@gamma.com',
                                password: 'test123',
                                joined: new Date().toISOString()
                            };
                            performSuccessAnimation(testUser);
                            return;
                        }

                        const user = users.find(u => u.email === formData.email && u.password === formData.password);

                        if (user) {
                            performSuccessAnimation(user);
                        } else {
                            setError('Invalid credentials');
                            // Shake effect could act here
                        }
                    }
                };

                processAuth();
            };

            const performSuccessAnimation = (user) => {
                setBirdState('celebrate');
                setTimeout(() => {
                    setBirdState('fly-away');
                    setTimeout(() => onLogin(user), 1000);
                }, 800);
            };

            let birdClass = 'w-32 h-32 mx-auto mb-8 transition-all duration-500 ';
            if (birdState === 'idle') birdClass += 'bird-idle';
            if (birdState === 'watching') birdClass += 'bird-watching';
            if (birdState === 'privacy') birdClass += 'bird-privacy';
            if (birdState === 'celebrate') birdClass += 'bird-celebrate';
            if (birdState === 'fly-away') birdClass += 'bird-fly-away';

            return (
                <div className="min-h-screen flex items-center justify-center relative p-4">
                    <div className="ambient-blob blob-1"></div>
                    <div className="ambient-blob blob-2"></div>

                    <div className="liquid-glass relative rounded-3xl p-10 w-full max-w-md z-10">
                        <div className={birdClass}>
                            <BirdSVG />
                        </div>

                        <h1 className="font-serif text-5xl font-bold text-center mb-2 tracking-wide">GAMMA</h1>
                        <p className="text-center text-gray-400 text-xs uppercase tracking-[0.3em] mb-8">
                            Premium Commerce
                        </p>

                        {error && (
                            <div className="mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-xl text-red-500 text-sm text-center font-medium backdrop-blur-sm">
                                {error}
                            </div>
                        )}

                        <form onSubmit={handleSubmit} className="space-y-4">
                            {isSignup && (
                                <input
                                    type="text"
                                    name="name"
                                    placeholder="Full Name"
                                    className="w-full px-5 py-4 rounded-xl premium-input text-sm"
                                    onFocus={() => handleFocus('name')}
                                    onBlur={handleBlur}
                                    value={formData.name}
                                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}
                                    required={isSignup}
                                />
                            )}
                            <input
                                type="email"
                                name="email"
                                placeholder="Email Address"
                                className="w-full px-5 py-4 rounded-xl premium-input text-sm"
                                onFocus={() => handleFocus('email')}
                                onBlur={handleBlur}
                                value={formData.email}
                                onChange={(e) => setFormData({ ...formData, email: e.target.value })}
                                required
                            />
                            <div className="space-y-4">
                                <input
                                    type="password"
                                    name="password"
                                    placeholder="Password"
                                    className="w-full px-5 py-4 rounded-xl premium-input text-sm"
                                    onFocus={() => handleFocus('password')}
                                    onBlur={handleBlur}
                                    value={formData.password}
                                    onChange={(e) => setFormData({ ...formData, password: e.target.value })}
                                    required
                                />
                                {isSignup && (
                                    <input
                                        type="password"
                                        name="confirmPassword"
                                        placeholder="Confirm Password"
                                        className="w-full px-5 py-4 rounded-xl premium-input text-sm"
                                        onFocus={() => handleFocus('confirmPassword')}
                                        onBlur={handleBlur}
                                        value={formData.confirmPassword}
                                        onChange={(e) => setFormData({ ...formData, confirmPassword: e.target.value })}
                                        required={isSignup}
                                    />
                                )}
                            </div>

                            <button
                                type="submit"
                                className="w-full premium-btn bg-gradient-to-r from-yellow-600 to-yellow-500 text-black font-bold py-4 rounded-xl mt-6 uppercase tracking-widest text-sm"
                            >
                                {isSignup ? 'Create Account' : 'Enter Portal'}
                            </button>
                        </form>

                        <div className="mt-8 text-center space-y-4">
                            <p className="text-gray-400 text-xs">
                                {isSignup ? 'Already have an account?' : "Don't have an account?"}
                            </p>
                            <button
                                onClick={() => {
                                    setIsSignup(!isSignup);
                                    setError('');
                                    setFormData({ ...formData, confirmPassword: '' });
                                }}
                                className="text-yellow-500 hover:text-yellow-400 text-xs uppercase tracking-[0.2em] font-bold transition-colors"
                            >
                                {isSignup ? 'Sign Login' : 'Sign Up Now'}
                            </button>
                        </div>
                    </div>
                </div>
            );
        };


        /* ====================== CATEGORY DRAWER ====================== */
        const CategoryDrawer = ({ isOpen, onClose, onCategorySelect, activeTab }) => {
            const categoryConfig = [
                { id: 'all', name: 'All Products' },
                { id: 'men', name: 'For Men' },
                { id: 'women', name: 'For Women' },
                { id: 'electronics', name: 'Electronics' }
            ];

            const handleCategoryClick = (categoryId) => {
                onCategorySelect(categoryId);
                onClose();
            };

            return (
                <>
                    {/* Overlay */}
                    <div
                        className={`category-overlay ${isOpen ? 'visible' : ''}`}
                        onClick={onClose}
                    ></div>

                    {/* Drawer */}
                    <div className={`category-drawer ${isOpen ? 'open' : ''}`}>
                        <div className="category-header">
                            <h2>Categories</h2>
                        </div>

                        <div className="category-list">
                            {categoryConfig.map(category => (
                                <div
                                    key={category.id}
                                    className={`category-item ${activeTab === category.id ? 'active' : ''}`}
                                    onClick={() => handleCategoryClick(category.id)}
                                >
                                    <span>{category.name}</span>
                                </div>
                            ))}
                        </div>
                    </div>
                </>
            );
        };


        /* ====================== USER PROFILE PANEL ====================== */
        /* ====================== USER PROFILE PANEL ====================== */
        const UserProfilePanel = ({ isOpen, onClose, onLogout, userName, userEmail, orders, wishlist, onToggleWishlist }) => {
            const [activeSection, setActiveSection] = useState('profile'); // 'profile', 'orders', 'wishlist', 'editProfile'
            const [expandedOrder, setExpandedOrder] = useState(null);
            const [profileData, setProfileData] = useState({
                name: userName || 'Guest User',
                email: userEmail || 'user@gamma.com',
                phone: '+91 98765 43210',
                address: '123 Main Street, Mumbai, Maharashtra 400001'
            });
            const [isEditing, setIsEditing] = useState(false);

            const settingsSections = [
                {
                    title: 'Account',
                    items: [
                        { title: 'My Orders', subtitle: `${orders.length} orders placed`, action: () => setActiveSection('orders') },
                        { title: 'My Wishlist', subtitle: `${wishlist.length} items saved`, action: () => setActiveSection('wishlist') },
                        { title: 'Edit Profile', subtitle: 'Update your personal information', action: () => setActiveSection('editProfile') },
                    ]
                },
                {
                    title: 'Preferences',
                    items: [
                        { title: 'Theme Mode', subtitle: 'Switch between light and dark', action: () => console.log('Theme') }
                    ]
                }
            ];

            const handleLogout = () => {
                if (confirm('Are you sure you want to logout?')) {
                    onLogout();
                    onClose();
                }
            };

            const getInitials = (name) => {
                if (!name) return 'U';
                return name.split(' ').map(n => n[0]).join('').toUpperCase().slice(0, 2);
            };

            // Helper to get product details for wishlist
            const getProductById = (id) => PRODUCTS.find(p => p.id === id);

            // Handle profile update
            const handleSaveProfile = () => {
                setIsEditing(false);
                alert('Profile updated successfully!');
                // In production, this would call an API to update user info
            };

            const handleCancelEdit = () => {
                setIsEditing(false);
                setProfileData({
                    name: userName || 'Guest User',
                    email: userEmail || 'user@gamma.com',
                    phone: '+91 98765 43210',
                    address: '123 Main Street, Mumbai, Maharashtra 400001'
                });
            };

            return (
                <>
                    <div className={`profile-panel-overlay ${isOpen ? 'visible' : ''}`} onClick={onClose}></div>

                    <div className={`profile-panel ${isOpen ? 'open' : ''}`}>
                        <div className="profile-header">
                            <div className="flex items-center justify-between mb-4">
                                {activeSection !== 'profile' && (
                                    <button onClick={() => setActiveSection('profile')} className="text-gray-400 hover:text-white">
                                        <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" /></svg>
                                    </button>
                                )}
                                <div className="flex-1"></div>
                                <button onClick={onClose} className="text-gray-400 hover:text-white">
                                    <Icons.X />
                                </button>
                            </div>

                            {activeSection === 'profile' && (
                                <>
                                    <div className="profile-avatar">{getInitials(profileData.name)}</div>
                                    <h2 className="profile-name text-white">{profileData.name}</h2>
                                    <p className="profile-email">{profileData.email}</p>
                                </>
                            )}
                            {activeSection === 'orders' && <h2 className="text-2xl font-serif text-white">Your Orders</h2>}
                            {activeSection === 'wishlist' && <h2 className="text-2xl font-serif text-white">Your Wishlist</h2>}
                            {activeSection === 'editProfile' && <h2 className="text-2xl font-serif text-white">Edit Profile</h2>}
                        </div>

                        <div className="profile-content">
                            {activeSection === 'profile' && (
                                <>
                                    {settingsSections.map((section, idx) => (
                                        <div key={idx} className="settings-section">
                                            <h3 className="section-title">{section.title}</h3>
                                            {section.items.map((item, itemIdx) => (
                                                <div key={itemIdx} className="settings-item" onClick={item.action}>
                                                    <div className="settings-item-content">
                                                        <p className="settings-item-title">{item.title}</p>
                                                        <p className="settings-item-subtitle">{item.subtitle}</p>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    ))}
                                    <div className="logout-section">
                                        <button className="logout-btn" onClick={handleLogout}>Logout</button>
                                    </div>
                                </>
                            )}

                            {activeSection === 'orders' && (
                                <div className="space-y-4">
                                    {orders.length === 0 ? (
                                        <div className="text-center py-10">
                                            <p className="text-gray-500 mb-4">No orders yet.</p>
                                            <p className="text-xs text-gray-600">Start shopping to see your orders here!</p>
                                        </div>
                                    ) : (
                                        orders.map(order => (
                                            <div key={order.id} className="glass-card rounded-xl border border-white/10 overflow-hidden">
                                                <div className="p-4 cursor-pointer" onClick={() => setExpandedOrder(expandedOrder === order.id ? null : order.id)}>
                                                    <div className="flex justify-between mb-2">
                                                        <span className="text-xs text-gray-500 uppercase tracking-wider">Order #{order.id}</span>
                                                        <span className={`text-[10px] uppercase tracking-widest px-2 py-0.5 rounded-full ${order.status === 'completed' || order.status === 'processing' ? 'bg-green-500/20 text-green-400' : 'bg-yellow-500/20 text-yellow-400'
                                                            }`}>
                                                            {order.status}
                                                        </span>
                                                    </div>
                                                    <div className="flex justify-between items-end">
                                                        <span className="text-white font-medium">{order.total_amount.toLocaleString('en-IN')}</span>
                                                        <span className="text-[10px] text-gray-500">{new Date(order.created_at).toLocaleDateString()}</span>
                                                    </div>
                                                    <div className="mt-2 flex items-center justify-between">
                                                        <span className="text-[10px] text-gray-400 uppercase">Click to {expandedOrder === order.id ? 'hide' : 'view'} details</span>
                                                        <svg className={`w-4 h-4 text-gray-400 transition-transform ${expandedOrder === order.id ? 'rotate-180' : ''}`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" />
                                                        </svg>
                                                    </div>
                                                </div>
                                                {expandedOrder === order.id && (
                                                    <div className="px-4 pb-4 border-t border-white/5">
                                                        <p className="text-xs text-gray-500 uppercase tracking-wider mt-3 mb-2">Delivery Address</p>
                                                        <p className="text-xs text-gray-300 mb-3">{order.address || 'Default Address'}</p>
                                                        <p className="text-xs text-gray-500 uppercase tracking-wider mb-2">Order Summary</p>
                                                        <div className="space-y-1">
                                                            <div className="flex justify-between text-xs text-gray-300">
                                                                <span>Total Amount</span>
                                                                <span className="text-yellow-400">{order.total_amount.toLocaleString('en-IN')}</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                )}
                                            </div>
                                        ))
                                    )}
                                </div>
                            )}

                            {activeSection === 'wishlist' && (
                                <div className="space-y-4">
                                    {wishlist.length === 0 ? (
                                        <div className="text-center py-10">
                                            <p className="text-gray-500 mb-4">Your wishlist is empty.</p>
                                            <p className="text-xs text-gray-600">Click the heart icon on products to save them here!</p>
                                        </div>
                                    ) : (
                                        wishlist.map(id => {
                                            const p = getProductById(id);
                                            if (!p) return null;
                                            return (
                                                <div key={id} className="flex gap-4 items-center glass-card p-3 rounded-xl border border-white/10">
                                                    <img src={p.image_url} className="w-16 h-16 rounded-lg object-cover" alt={p.name} />
                                                    <div className="flex-1">
                                                        <p className="text-sm text-white font-medium">{p.name}</p>
                                                        <p className="text-xs text-yellow-500">{p.price.toLocaleString('en-IN')}</p>
                                                        <p className="text-[10px] text-gray-500 mt-1">{p.category}</p>
                                                    </div>
                                                    <div className="flex flex-col gap-2">
                                                        <button
                                                            onClick={() => {
                                                                // Add to cart functionality would be called here
                                                                alert('Added to cart!');
                                                            }}
                                                            className="text-[10px] uppercase tracking-wider px-3 py-1.5 bg-yellow-500/20 text-yellow-400 rounded-full hover:bg-yellow-500/30"
                                                        >
                                                            Add to Cart
                                                        </button>
                                                        <button onClick={() => onToggleWishlist(p)} className="text-gray-500 hover:text-red-500 text-[10px] uppercase">
                                                            Remove
                                                        </button>
                                                    </div>
                                                </div>
                                            );
                                        })
                                    )}
                                </div>
                            )}

                            {activeSection === 'editProfile' && (
                                <div className="space-y-6">
                                    <div className="space-y-4">
                                        <div>
                                            <label className="text-xs uppercase tracking-wider text-gray-500 block mb-2">Full Name</label>
                                            <input
                                                type="text"
                                                value={profileData.name}
                                                onChange={(e) => setProfileData({ ...profileData, name: e.target.value })}
                                                disabled={!isEditing}
                                                className="premium-input w-full px-4 py-3 rounded-xl text-sm"
                                            />
                                        </div>
                                        <div>
                                            <label className="text-xs uppercase tracking-wider text-gray-500 block mb-2">Email Address</label>
                                            <input
                                                type="email"
                                                value={profileData.email}
                                                disabled
                                                className="premium-input w-full px-4 py-3 rounded-xl text-sm opacity-60 cursor-not-allowed"
                                            />
                                            <p className="text-[10px] text-gray-600 mt-1">Email cannot be changed</p>
                                        </div>
                                        <div>
                                            <label className="text-xs uppercase tracking-wider text-gray-500 block mb-2">Phone Number</label>
                                            <input
                                                type="tel"
                                                value={profileData.phone}
                                                onChange={(e) => setProfileData({ ...profileData, phone: e.target.value })}
                                                disabled={!isEditing}
                                                className="premium-input w-full px-4 py-3 rounded-xl text-sm"
                                            />
                                        </div>
                                        <div>
                                            <label className="text-xs uppercase tracking-wider text-gray-500 block mb-2">Delivery Address</label>
                                            <textarea
                                                value={profileData.address}
                                                onChange={(e) => setProfileData({ ...profileData, address: e.target.value })}
                                                disabled={!isEditing}
                                                rows={3}
                                                className="premium-input w-full px-4 py-3 rounded-xl text-sm resize-none"
                                            />
                                        </div>
                                    </div>

                                    <div className="flex gap-3">
                                        {!isEditing ? (
                                            <button
                                                onClick={() => setIsEditing(true)}
                                                className="flex-1 bg-gradient-to-r from-yellow-600 to-yellow-500 text-black font-semibold text-xs uppercase tracking-wider py-3 rounded-full hover:opacity-90 transition-opacity"
                                            >
                                                Edit Profile
                                            </button>
                                        ) : (
                                            <>
                                                <button
                                                    onClick={handleSaveProfile}
                                                    className="flex-1 bg-gradient-to-r from-green-600 to-green-500 text-white font-semibold text-xs uppercase tracking-wider py-3 rounded-full hover:opacity-90 transition-opacity"
                                                >
                                                    Save Changes
                                                </button>
                                                <button
                                                    onClick={handleCancelEdit}
                                                    className="flex-1 border border-white/20 text-white font-semibold text-xs uppercase tracking-wider py-3 rounded-full hover:bg-white/5 transition-all"
                                                >
                                                    Cancel
                                                </button>
                                            </>
                                        )}
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>
                </>
            );
        };

        /* ====================== NAVBAR ====================== */
        const Navbar = ({
            cartCount,
            searchQuery,
            onSearchChange,
            activeTab,
            onNavChange,
            onCartClick,
            onProfileClick,
            theme,
            onThemeToggle,
            cartIconRef,
            cartPulse,
            onCategoryMenuToggle,
            isCategoryMenuOpen,
            showSearch,
            setShowSearch
        }) => {

            const navItem = (id, label) => (
                <button
                    onClick={() => onNavChange(id)}
                    className={`transition-colors ${activeTab === id
                        ? "text-white"
                        : "text-gray-400 hover:text-white"
                        }`}
                >
                    {label}
                </button>
            );

            return (
                <nav className="premium-header fixed top-0 w-full z-[9999] liquid-glass border-b border-white/10">
                    <div className="w-full mx-auto px-6 py-4">
                        <div className="flex items-center justify-between w-full relative">
                            {/* LEFT ZONE (Blue): Hamburger + Logo */}
                            <div className="flex items-center gap-3">
                                <button
                                    onClick={onCategoryMenuToggle}
                                    className={`hamburger-btn ${isCategoryMenuOpen ? 'active' : ''}`}
                                    title="Categories"
                                >
                                    <div className="hamburger-line"></div>
                                    <div className="hamburger-line"></div>
                                    <div className="hamburger-line"></div>
                                </button>
                                <h1 className="font-serif text-3xl font-bold tracking-widest text-white">GAMMA</h1>
                            </div>

                            {/* CENTER ZONE (Blue): Navigation Menu */}
                            <div className="hidden md:flex items-center gap-8 text-xs font-medium uppercase tracking-[0.2em] absolute left-1/2 transform -translate-x-1/2">
                                {navItem("home", "HOME")}
                                {navItem("new", "NEW")}
                                {navItem("about", "ABOUT")}
                            </div>

                            {/* RIGHT ZONE (Yellow): Action Icons */}
                            <div className="flex items-center gap-4">
                                <button
                                    onClick={() => setShowSearch(!showSearch)}
                                    className={`transition-all ${showSearch ? 'text-yellow-500' : 'text-white hover:text-yellow-500'}`}
                                    title="Toggle search"
                                >
                                    <Icons.Search />
                                </button>
                                <button
                                    onClick={onThemeToggle}
                                    className="theme-toggle text-white hover:text-yellow-500 transition-all"
                                    title={theme === 'dark' ? 'Switch to light mode' : 'Switch to dark mode'}
                                >
                                    {theme === 'dark' ? <Icons.Sun /> : <Icons.Moon />}
                                </button>
                                <button
                                    onClick={onProfileClick}
                                    className="text-white hover:text-yellow-500 transition-colors"
                                >
                                    <Icons.User />
                                </button>
                                <button
                                    ref={cartIconRef}
                                    onClick={onCartClick}
                                    className={`relative text-white hover:text-yellow-500 transition-colors ${cartPulse ? 'cart-pulse' : ''}`}
                                >
                                    <Icons.Cart />
                                    {cartCount > 0 && (
                                        <span className={`cart-badge ${cartPulse ? 'badge-bounce' : ''}`}>{cartCount}</span>
                                    )}
                                </button>
                            </div>
                        </div>

                        {showSearch && (
                            <div className="mt-4" style={{ animation: 'slideDown 0.3s ease' }}>
                                <input
                                    type="text"
                                    placeholder="Search products..."
                                    value={searchQuery}
                                    onChange={(e) => onSearchChange(e.target.value)}
                                    className="w-full px-5 py-3 rounded-xl premium-input text-sm"
                                    autoFocus
                                />
                            </div>
                        )}
                    </div>
                </nav>
            );
        };


        /* ====================== FLYING PRODUCT ANIMATION ====================== */
        const FlyingProduct = ({ id, image, startX, startY, endX, endY, onComplete }) => {
            const imgRef = useRef(null);

            React.useEffect(() => {
                if (!imgRef.current) return;

                // Calculate relative translation
                const deltaX = endX - startX;
                const deltaY = endY - startY;

                // Set CSS variables for animation
                imgRef.current.style.setProperty('--target-x', `${deltaX}px`);
                imgRef.current.style.setProperty('--target-y', `${deltaY}px`);
                imgRef.current.style.left = `${startX}px`;
                imgRef.current.style.top = `${startY}px`;

                // Remove after animation completes
                const timer = setTimeout(() => {
                    onComplete(id);
                }, 1000);

                return () => clearTimeout(timer);
            }, [id, startX, startY, endX, endY, onComplete]);

            return (
                <img
                    ref={imgRef}
                    src={image}
                    alt="Flying product"
                    className="flying-product"
                />
            );
        };

        /* ====================== PRODUCT CARD / GRID / MODAL ====================== */

        const ProductCard = ({ product, onOpen, onAddToCart, onHover, onToggleWishlist, isWishlisted }) => (
            <div
                className="glass-card rounded-2xl overflow-hidden flex flex-col h-full cursor-pointer"
                onMouseEnter={(e) => {
                    if (!onHover) return;
                    const rect = e.currentTarget.getBoundingClientRect();
                    onHover(product, rect);
                }}
            >
                <div className="relative overflow-hidden">
                    <img src={product.image_url} className="w-full h-56 object-cover" />
                    {product.tag && (
                        <span className="absolute top-3 left-3 text-[10px] uppercase tracking-[0.2em] bg-black/70 text-gray-100 rounded-full px-3 py-1">
                            {product.tag}
                        </span>
                    )}
                    <button
                        onClick={(e) => {
                            e.stopPropagation();
                            onToggleWishlist(product);
                        }}
                        className={`absolute top-3 right-3 transition-colors ${isWishlisted ? 'text-red-500' : 'text-white/80 hover:text-red-400'}`}
                    >
                        <Icons.Heart filled={isWishlisted} />
                    </button>
                </div>
                <div className="p-5 flex flex-col flex-1">
                    <div className="flex items-center justify-between mb-2">
                        <h3 className="font-serif text-lg text-white">{product.name}</h3>
                        <span className="text-sm font-semibold text-yellow-400">
                            {product.price.toLocaleString('en-IN')}
                        </span>
                    </div>
                    <p className="text-xs text-gray-400 mb-3">{product.description}</p>
                    <div className="flex items-center justify-between text-xs text-gray-400 mb-4">
                        <div className="flex items-center gap-1">
                            <Icons.Star className="w-3.5 h-3.5 text-yellow-400" />
                            <span>{product.rating.toFixed(1)}  {product.reviews} reviews</span>
                        </div>
                    </div>
                    <div className="mt-auto flex items-center gap-3">
                        <button
                            onClick={() => onOpen(product)}
                            className="flex-1 text-xs uppercase tracking-[0.2em] text-gray-200 border border-white/15 rounded-full py-2 hover:bg-white/10 transition-colors"
                        >
                            View
                        </button>
                        <button
                            onClick={(e) => onAddToCart(product, e)}
                            className="flex-1 text-xs uppercase tracking-[0.2em] bg-gradient-to-r from-yellow-600 to-yellow-500 text-black rounded-full py-2 premium-btn add-to-cart-btn"
                        >
                            Add
                        </button>
                    </div>
                </div>
            </div>
        );

        const ProductDetailModal = ({ product, onClose }) => {
            if (!product) return null;
            return (
                <div className="fixed inset-0 z-50 flex items-center justify-center success-overlay">
                    <div className="max-w-4xl w-full mx-4 bg-black/80 rounded-3xl border border-white/15 overflow-hidden"
                        style={{ animation: 'macOpen 0.23s ease-out' }}>
                        <div className="flex flex-col md:flex-row">
                            <div className="md:w-1/2 h-64 md:h-auto">
                                <img src={product.image_url} className="w-full h-full object-cover" />
                            </div>
                            <div className="md:w-1/2 p-6 md:p-8 space-y-4">
                                <div className="flex items-start justify-between gap-4">
                                    <div>
                                        <h2 className="font-serif text-2xl text-white mb-1">{product.name}</h2>
                                        <p className="text-xs uppercase tracking-[0.25em] text-gray-500">{product.category}</p>
                                    </div>
                                    <button onClick={onClose} className="text-gray-400 hover:text-white">
                                        <Icons.X />
                                    </button>
                                </div>

                                <div className="flex items-center gap-2 text-sm text-gray-300">
                                    <div className="flex items-center gap-1">
                                        <Icons.Star className="w-4 h-4 text-yellow-400" />
                                        <span>{product.rating.toFixed(1)}</span>
                                    </div>
                                    <span></span>
                                    <span>{product.reviews} reviews</span>
                                    <span></span>
                                    <span className="text-yellow-400 font-semibold">
                                        {product.price.toLocaleString('en-IN')}
                                    </span>
                                </div>

                                <p className="text-sm text-gray-200 leading-relaxed">{product.description}</p>

                                <div>
                                    <p className="text-xs uppercase tracking-[0.25em] text-gray-500 mb-2">Key Features</p>
                                    <div className="flex flex-wrap gap-2">
                                        {product.features.map((f, idx) => (
                                            <span key={idx} className="px-3 py-1 rounded-full bg-white/5 border border-white/10 text-xs text-gray-200">
                                                {f}
                                            </span>
                                        ))}
                                    </div>
                                </div>

                                <div className="flex items-center justify-between pt-2">
                                    <span className="text-xs text-gray-400">In Stock: {product.stock}</span>
                                    <button className="premium-btn bg-gradient-to-r from-yellow-600 to-yellow-500 text-black text-xs uppercase tracking-[0.25em] px-5 py-2 rounded-full">
                                        Add to Cart
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const ProductGrid = ({ products, onOpen, onAddToCart, onProductHover, title, subtitle, onToggleWishlist, wishlist }) => (
            <section className="pt-28 pb-16">
                <div className="w-full max-w-[1400px] mx-auto px-6">
                    <div className="mb-10 flex flex-col md:flex-row md:items-end md:justify-between gap-4">
                        <div>
                            <p className="text-xs uppercase tracking-[0.3em] text-gray-500 mb-2">{subtitle}</p>
                            <h2 className="font-serif text-4xl md:text-5xl text-white">{title}</h2>
                        </div>
                        <p className="text-xs text-gray-400 max-w-sm">
                            Every piece in this collection is built for people who live between airports, studios and late-night sessions.
                        </p>
                    </div>
                    <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
                        {products.map(p => (
                            <ProductCard
                                key={p.id}
                                product={p}
                                onOpen={onOpen}
                                onAddToCart={onAddToCart}
                                onHover={onProductHover}
                                onToggleWishlist={onToggleWishlist}
                                isWishlisted={wishlist.includes(p.id)}
                            />
                        ))}
                    </div>
                </div>
            </section>
        );

        /* ====================== SALES & OFFERS BANNER ====================== */

        const SalesOffersBanner = ({ onProductClick }) => {
            const [timeLeft, setTimeLeft] = React.useState({
                hours: 12,
                minutes: 34,
                seconds: 56
            });
            const scrollContainerRef = React.useRef(null);
            const [isPaused, setIsPaused] = React.useState(false);
            const autoScrollIntervalRef = React.useRef(null);
            const resumeTimeoutRef = React.useRef(null);

            // Countdown timer effect
            React.useEffect(() => {
                const timer = setInterval(() => {
                    setTimeLeft(prev => {
                        let { hours, minutes, seconds } = prev;

                        if (seconds > 0) {
                            seconds--;
                        } else if (minutes > 0) {
                            minutes--;
                            seconds = 59;
                        } else if (hours > 0) {
                            hours--;
                            minutes = 59;
                            seconds = 59;
                        } else {
                            // Reset to 24 hours when countdown ends
                            hours = 23;
                            minutes = 59;
                            seconds = 59;
                        }

                        return { hours, minutes, seconds };
                    });
                }, 1000);

                return () => clearInterval(timer);
            }, []);

            // Auto-scroll effect
            React.useEffect(() => {
                const container = scrollContainerRef.current;
                if (!container) return;

                const startAutoScroll = () => {
                    autoScrollIntervalRef.current = setInterval(() => {
                        if (!isPaused && container) {
                            const maxScroll = container.scrollWidth - container.clientWidth;
                            const currentScroll = container.scrollLeft;

                            // Smooth continuous scroll
                            container.scrollBy({ left: 1, behavior: 'auto' });

                            // Reset to beginning when reaching the middle (since we have duplicates)
                            if (currentScroll >= maxScroll / 2) {
                                container.scrollLeft = 0;
                            }
                        }
                    }, 20); // 50fps for smooth animation
                };

                startAutoScroll();

                return () => {
                    if (autoScrollIntervalRef.current) {
                        clearInterval(autoScrollIntervalRef.current);
                    }
                };
            }, [isPaused]);

            // Handle pause/resume
            const handlePause = () => {
                setIsPaused(true);

                // Clear any existing resume timeout
                if (resumeTimeoutRef.current) {
                    clearTimeout(resumeTimeoutRef.current);
                }

                // Auto-resume after 3 seconds
                resumeTimeoutRef.current = setTimeout(() => {
                    setIsPaused(false);
                }, 3000);
            };

            // Manual scroll with pause
            const scroll = (direction) => {
                if (scrollContainerRef.current) {
                    const scrollAmount = 400;
                    scrollContainerRef.current.scrollBy({
                        left: direction === 'left' ? -scrollAmount : scrollAmount,
                        behavior: 'smooth'
                    });
                    handlePause();
                }
            };

            // Map offers to actual products
            const offers = [
                {
                    title: "FLASH SALE",
                    discount: "40% OFF",
                    description: "Men's Fashion",
                    badge: "HOT",
                    productId: 1
                },
                {
                    title: "FREE SHIPPING",
                    discount: "On 2,000+",
                    description: "All Orders Across India",
                    badge: "NEW",
                    productId: 23
                },
                {
                    title: "BUNDLE DEAL",
                    discount: "Buy 2 Get 1",
                    description: "Selected Items Only",
                    badge: "DEAL",
                    productId: 8
                },
                {
                    title: "NEW ARRIVALS",
                    discount: "20% OFF",
                    description: "Latest Collection",
                    badge: "NEW",
                    productId: 27
                }
            ].map(offer => {
                const product = PRODUCTS.find(p => p.id === offer.productId);
                return { ...offer, product };
            });

            return (
                <section className="pt-24 pb-16 relative overflow-hidden">
                    {/* Video Background */}
                    <div className="absolute inset-0 opacity-20 pointer-events-none">
                        <video
                            autoPlay
                            loop
                            muted
                            playsInline
                            className="w-full h-full object-cover"
                            style={{ filter: 'blur(8px)' }}
                        >
                            <source src="https://cdn.coverr.co/videos/coverr-luxury-shopping-bags-5459/1080p.mp4" type="video/mp4" />
                        </video>
                    </div>

                    <div className="w-full px-4 md:px-8 relative z-10">
                        {/* Main Banner with Liquid Glass */}
                        <div className="liquid-refraction p-8 md:p-12 mb-8">
                            <div className="grid md:grid-cols-2 gap-8 items-center">
                                {/* Left: Flash Sale Info */}
                                <div>
                                    <p className="text-xs uppercase tracking-[0.3em] text-yellow-500 mb-3 font-bold">
                                         LIMITED TIME OFFER
                                    </p>
                                    <h1 className="font-serif text-5xl md:text-7xl text-white mb-4 leading-tight">
                                        Flash <span className="text-yellow-500">Sale</span>
                                    </h1>
                                    <p className="text-6xl md:text-8xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-yellow-500 to-yellow-300 mb-6">
                                        40% OFF
                                    </p>
                                    <p className="text-sm text-gray-300 mb-8 max-w-md">
                                        Exclusive discounts on men's fashion, women's wear, and premium electronics.
                                        Don't miss out on our biggest sale of the season.
                                    </p>
                                    <button className="premium-btn bg-gradient-to-r from-yellow-600 to-yellow-500 text-black font-semibold text-xs uppercase tracking-[0.3em] px-8 py-4 rounded-full">
                                        Shop Now
                                    </button>
                                </div>

                                {/* Right: Countdown Timer */}
                                <div className="text-center">
                                    <p className="text-xs uppercase tracking-[0.3em] text-gray-400 mb-4">
                                        Sale Ends In
                                    </p>
                                    <div className="flex justify-center gap-4 mb-6">
                                        <div>
                                            <div className="countdown-digit text-yellow-500">
                                                {String(timeLeft.hours).padStart(2, '0')}
                                            </div>
                                            <p className="text-xs text-gray-500 mt-2 uppercase tracking-wider">Hours</p>
                                        </div>
                                        <div className="text-4xl text-yellow-500 self-center">:</div>
                                        <div>
                                            <div className="countdown-digit text-yellow-500">
                                                {String(timeLeft.minutes).padStart(2, '0')}
                                            </div>
                                            <p className="text-xs text-gray-500 mt-2 uppercase tracking-wider">Minutes</p>
                                        </div>
                                        <div className="text-4xl text-yellow-500 self-center">:</div>
                                        <div>
                                            <div className="countdown-digit text-yellow-500">
                                                {String(timeLeft.seconds).padStart(2, '0')}
                                            </div>
                                            <p className="text-xs text-gray-500 mt-2 uppercase tracking-wider">Seconds</p>
                                        </div>
                                    </div>
                                    <div className="glass-card rounded-2xl overflow-hidden">
                                        <img
                                            src="./assets/images/2.jpeg"
                                            alt="Featured Product"
                                            className="w-full h-64 object-cover"
                                        />
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Sliding Offer Cards with Navigation */}
                        <div className="relative py-8">
                            <p className="text-xs uppercase tracking-[0.3em] text-gray-500 mb-4 text-center">
                                Active Promotions
                            </p>

                            {/* Left Arrow */}
                            <button
                                onClick={() => scroll('left')}
                                className="carousel-arrow carousel-arrow-left"
                                aria-label="Previous offers"
                            >
                                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2.5} d="M15 19l-7-7 7-7" />
                                </svg>
                            </button>

                            {/* Right Arrow */}
                            <button
                                onClick={() => scroll('right')}
                                className="carousel-arrow carousel-arrow-right"
                                aria-label="Next offers"
                            >
                                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2.5} d="M9 5l7 7-7 7" />
                                </svg>
                            </button>

                            <div
                                ref={scrollContainerRef}
                                onMouseEnter={handlePause}
                                onMouseLeave={() => {
                                    if (resumeTimeoutRef.current) {
                                        clearTimeout(resumeTimeoutRef.current);
                                    }
                                    setIsPaused(false);
                                }}
                                className="flex gap-6 overflow-x-auto scrollbar-hide"
                                style={{ scrollbarWidth: 'none', msOverflowStyle: 'none' }}
                            >
                                {[...offers, ...offers, ...offers].map((offer, idx) => (
                                    <div
                                        key={idx}
                                        onClick={() => offer.product && onProductClick(offer.product)}
                                        className="liquid-refraction flex-shrink-0 w-80 p-6 cursor-pointer hover:scale-105 transition-transform"
                                    >
                                        <div className="flex items-center gap-4 mb-4">
                                            <img
                                                src={offer.product?.image || './assets/images/placeholder.jpeg'}
                                                alt={offer.title}
                                                className="w-20 h-20 rounded-xl object-cover"
                                            />
                                            <div>
                                                <span className="inline-block px-3 py-1 rounded-full bg-yellow-500 text-black text-xs font-bold mb-2">
                                                    {offer.badge}
                                                </span>
                                                <h3 className="font-serif text-xl text-white">{offer.title}</h3>
                                            </div>
                                        </div>
                                        <p className="text-3xl font-bold text-yellow-500 mb-2">{offer.discount}</p>
                                        <p className="text-sm text-gray-300">{offer.description}</p>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                </section>
            );
        };

        const AboutSection = () => {
            const [activeSection, setActiveSection] = React.useState('overview');
            const [showContact, setShowContact] = React.useState(false);

            const images = [
                { url: "Models/DSC00563(1).jpg", pos: "top-0 left-0 w-1/4 h-[400px]" },
                { url: "https://images.unsplash.com/photo-1490114538077-0a7f8cb49891?auto=format&fit=crop&q=80&w=800", pos: "top-10 left-[28%] w-1/5 h-[300px]" },
                { url: "Models/dilna .jpeg", pos: "top-0 left-[52%] w-1/5 h-[450px]" },
                { url: "https://images.unsplash.com/photo-1488161628813-04466f872be2?auto=format&fit=crop&q=80&w=800", pos: "top-10 right-0 w-1/5 h-[320px]" },
                { url: "Models/kanye.jpeg", pos: "bottom-10 left-0 w-[22%] h-[420px]" },
                { url: "https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?auto=format&fit=crop&q=80&w=800", pos: "bottom-0 left-[28%] w-[22%] h-[500px]" },
                { url: "Models/kendall jenner.jpeg", pos: "bottom-10 left-[55%] w-[18%] h-[380px]" },
                { url: "https://images.unsplash.com/photo-1509631179647-0177331693ae?auto=format&fit=crop&q=80&w=800", pos: "bottom-0 right-0 w-[20%] h-[400px]" },
            ];

            const sections = {
                overview: {
                    title: "Built Around the Modern Rhythm of Life",
                    content: "We curate quality, comfort, and seamless experiences in every detail and every click. Gamma represents a new standard in digital commercewhere technology meets taste, and convenience never compromises style."
                },
                journal: {
                    title: "Our Journey",
                    content: "From concept to creation, Gamma was born from a simple belief: shopping should inspire. Each collection tells a story, every product is carefully chosen, and our commitment to excellence drives everything we do."
                },
                story: {
                    title: "The Gamma Philosophy",
                    content: "More than an e-commerce platform, Gamma is a digital sanctuary for thoughtful choices, refined taste, and effortless living. We believe in the power of simplicity, the beauty of minimalism, and the importance of authenticity."
                },
                archive: {
                    title: "Our Collections",
                    content: "Explore curated selections that define contemporary elegance. From timeless classics to cutting-edge innovations, each piece in our archive represents the pinnacle of design and craftsmanship."
                }
            };

            const ContactModal = () => {
                if (!showContact) return null;
                return (
                    <div className="fixed inset-0 z-50 flex items-center justify-center" style={{ background: 'rgba(0,0,0,0.8)' }} onClick={() => setShowContact(false)}>
                        <div className="bg-white dark:bg-black/90 backdrop-blur-xl p-12 rounded-3xl max-w-md w-full mx-4 shadow-2xl" onClick={e => e.stopPropagation()}>
                            <h2 className="editorial-font text-3xl mb-6 text-black dark:text-white">Get in Touch</h2>
                            <div className="space-y-4">
                                <div>
                                    <p className="text-xs uppercase tracking-[0.3em] text-black/50 dark:text-white/50 mb-2">Email</p>
                                    <a href="mailto:gamma@gmail.com" className="text-lg text-black dark:text-white hover:opacity-70 transition-opacity">gamma@gmail.com</a>
                                </div>
                                <div>
                                    <p className="text-xs uppercase tracking-[0.3em] text-black/50 dark:text-white/50 mb-2">Location</p>
                                    <p className="text-sm text-black/70 dark:text-white/70">Digital Sanctuary, Worldwide</p>
                                </div>
                            </div>
                            <button
                                onClick={() => setShowContact(false)}
                                className="mt-8 w-full border border-black dark:border-white text-black dark:text-white py-3 text-xs uppercase tracking-[0.3em] hover:bg-black hover:text-white dark:hover:bg-white dark:hover:text-black transition-all"
                            >
                                Close
                            </button>
                        </div>
                    </div>
                );
            };

            return (
                <section className="editorial-bg min-h-screen relative overflow-hidden flex flex-col items-center justify-center py-20 px-6">
                    <ContactModal />

                    {/* Background Heading */}
                    <div className="absolute inset-0 flex items-center justify-center overflow-hidden">
                        <h1 className="editorial-font editorial-text-heading select-none">
                            GAMMA
                        </h1>
                    </div>

                    {/* Image Grid Overlay */}
                    <div className="relative w-full max-w-[1400px] h-[85vh] z-10">
                        {images.map((img, idx) => (
                            <div
                                key={idx}
                                className={`absolute grid-image-container ${img.pos} rounded-sm shadow-2xl animation-stagger-${(idx % 4) + 1}`}
                            >
                                <img src={img.url} alt={`Model ${idx}`} />
                                {idx === 5 && (
                                    <div className="absolute bottom-4 left-4 bg-black px-2 py-1">
                                        <p className="text-[10px] text-white uppercase tracking-widest">Featured Story</p>
                                    </div>
                                )}
                            </div>
                        ))}
                    </div>

                    {/* Content Layer (Floating overlays) */}
                    <div className="absolute inset-0 flex items-center justify-center z-20 pointer-events-none">
                        <div className="max-w-3xl text-center px-10">
                            {/* Semi-transparent background panel for text */}
                            <div className="relative bg-white/90 dark:bg-black/85 backdrop-blur-md px-12 py-10 rounded-2xl shadow-2xl animation-stagger-1 pointer-events-auto" style={{ boxShadow: '0 20px 60px rgba(0,0,0,0.3)' }}>
                                <p className="editorial-font text-black dark:text-white text-2xl md:text-3xl mb-6 font-semibold" style={{ textShadow: '0 2px 4px rgba(0,0,0,0.1)' }}>
                                    {sections[activeSection].title}
                                </p>
                                <div className="h-px w-32 bg-gradient-to-r from-transparent via-black/30 dark:via-white/30 to-transparent mx-auto mb-6"></div>
                                <p className="text-black/80 dark:text-white/80 text-sm md:text-base leading-relaxed">
                                    {sections[activeSection].content}
                                </p>
                            </div>
                        </div>
                    </div>

                    {/* Bottom Navigation */}
                    <div className="relative w-full max-w-[1400px] flex flex-wrap justify-between items-end mt-20 z-30 font-semibold text-[11px] tracking-[0.2em] text-black dark:text-white">
                        <div className="flex gap-8 mb-4 md:mb-0">
                            <button
                                onClick={() => setActiveSection('overview')}
                                className={`hover:opacity-50 transition-opacity uppercase pb-1 ${activeSection === 'overview' ? 'border-b border-black dark:border-white' : ''
                                    }`}
                            >
                                Overview
                            </button>
                            <button
                                onClick={() => setActiveSection('journal')}
                                className={`hover:opacity-50 transition-opacity uppercase pb-1 ${activeSection === 'journal' ? 'border-b border-black dark:border-white' : ''
                                    }`}
                            >
                                Journal
                            </button>
                            <button
                                onClick={() => setActiveSection('story')}
                                className={`hover:opacity-50 transition-opacity uppercase pb-1 ${activeSection === 'story' ? 'border-b border-black dark:border-white' : ''
                                    }`}
                            >
                                Story
                            </button>
                            <button
                                onClick={() => setActiveSection('archive')}
                                className={`hover:opacity-50 transition-opacity uppercase pb-1 ${activeSection === 'archive' ? 'border-b border-black dark:border-white' : ''
                                    }`}
                            >
                                Archive
                            </button>
                        </div>

                        <div className="flex flex-col items-end gap-1">
                            <p className="text-black/50 dark:text-white/50 text-[10px] uppercase mb-4 max-w-[200px] text-right">
                                where simplicity speaks softly and discovery flows naturally.
                            </p>
                            <button
                                onClick={() => setShowContact(true)}
                                className="hover:opacity-50 transition-opacity uppercase border border-black dark:border-white px-12 py-3"
                            >
                                Contact
                            </button>
                        </div>
                    </div>

                    {/* Footer */}
                    <div className="relative w-full max-w-[1400px] flex justify-between items-center mt-12 z-30 text-[9px] tracking-[0.3em] text-black/30 dark:text-white/30 uppercase">
                        <p> 2024 Gamma Studio</p>
                        <p>Designed for Carry Rituals</p>
                    </div>

                    {/* Fixed Decorative Text */}
                    <div className="absolute left-10 top-1/2 -rotate-90 origin-left text-[10px] tracking-[0.5em] text-black/30 dark:text-white/30 uppercase hidden md:block">
                        Est. 2024  Digital Sanctuary
                    </div>
                </section>
            );
        };

        /* ====================== CHECKOUT PAGE ====================== */

        const CheckoutPage = ({ open, items, onClose, onPlaceOrder, currentUser }) => {
            const [step, setStep] = useState(1); // 1 = Address, 2 = Payment, 3 = Review
            const [shippingAddress, setShippingAddress] = useState({
                fullName: currentUser?.name || '',
                email: currentUser?.email || '',
                phone: '',
                address: '',
                city: '',
                state: '',
                pincode: '',
                country: 'India'
            });
            const [paymentMethod, setPaymentMethod] = useState('razorpay'); // razorpay, cod, card
            const [cardDetails, setCardDetails] = useState({
                cardNumber: '',
                cardName: '',
                expiryDate: '',
                cvv: ''
            });
            const [isProcessing, setIsProcessing] = useState(false);

            if (!open) return null;

            const subtotal = items.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const shipping = subtotal > 5000 ? 0 : 200;
            const tax = subtotal * 0.18; // 18% GST
            const total = subtotal + shipping + tax;

            const handleAddressChange = (field, value) => {
                setShippingAddress(prev => ({ ...prev, [field]: value }));
            };

            const handleCardDetailChange = (field, value) => {
                setCardDetails(prev => ({ ...prev, [field]: value }));
            };


            const validateAddress = () => {
                const required = ['fullName', 'email', 'phone', 'address', 'city', 'state', 'pincode'];
                console.log('Validating address:', shippingAddress);
                for (let field of required) {
                    if (!shippingAddress[field] || shippingAddress[field].trim() === '') {
                        alert(`Please fill in ${field}. Current value: "${shippingAddress[field] || 'empty'}"`);
                        console.error(`Validation failed for field: ${field} `);
                        return false;
                    }
                }
                console.log('Address validation passed!');
                return true;
            };

            const handleContinueToPayment = () => {
                console.log('Continue to Payment clicked', shippingAddress);
                if (validateAddress()) {
                    console.log('Setting step to 2');
                    setStep(2);
                } else {
                    console.log('Validation failed');
                }
            };


            const handlePlaceOrder = () => {
                setIsProcessing(true);

                // Prepare order data
                const orderData = {
                    address: shippingAddress,
                    paymentMethod: paymentMethod,
                    items: items,
                    subtotal: subtotal,
                    shipping: shipping,
                    tax: tax,
                    total: total
                };

                // Call parent function to create order
                setTimeout(() => {
                    onPlaceOrder(orderData);
                    setIsProcessing(false);
                }, 2000);
            };

            return (
                <div className="fixed inset-0 z-50 flex items-center justify-center success-overlay overflow-y-auto" onClick={onClose}>
                    <div className="w-full max-w-6xl mx-4 my-8 bg-black/90 backdrop-blur-xl border border-white/10 rounded-3xl shadow-2xl"
                        style={{ animation: 'macOpen 0.3s ease-out' }}
                        onClick={(e) => e.stopPropagation()}>

                        {/* Header */}
                        <div className="flex items-center justify-between px-8 py-6 border-b border-white/10">
                            <div>
                                <h2 className="text-2xl editorial-font text-white">Checkout</h2>
                                <p className="text-xs text-gray-400 uppercase tracking-widest mt-1">Secure Payment Gateway</p>
                            </div>
                            <button onClick={onClose} className="text-gray-400 hover:text-white transition-colors" aria-label="Close checkout">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                                    <line x1="18" y1="6" x2="6" y2="18"></line>
                                    <line x1="6" y1="6" x2="18" y2="18"></line>
                                </svg>
                            </button>
                        </div>

                        {/* Progress Steps */}
                        <div className="flex items-center justify-center gap-4 px-8 py-6 border-b border-white/10">
                            <div className="flex items-center gap-2">
                                <div className={`w - 8 h - 8 rounded - full flex items - center justify - center text - xs font - bold ${step >= 1 ? 'bg-yellow-500 text-black' : 'bg-white/10 text-gray-500'} `}>1</div>
                                <span className={`text - xs uppercase tracking - wider ${step >= 1 ? 'text-white' : 'text-gray-500'} `}>Address</span>
                            </div>
                            <div className="h-px w-16 bg-white/20"></div>
                            <div className="flex items-center gap-2">
                                <div className={`w - 8 h - 8 rounded - full flex items - center justify - center text - xs font - bold ${step >= 2 ? 'bg-yellow-500 text-black' : 'bg-white/10 text-gray-500'} `}>2</div>
                                <span className={`text - xs uppercase tracking - wider ${step >= 2 ? 'text-white' : 'text-gray-500'} `}>Payment</span>
                            </div>
                            <div className="h-px w-16 bg-white/20"></div>
                            <div className="flex items-center gap-2">
                                <div className={`w - 8 h - 8 rounded - full flex items - center justify - center text - xs font - bold ${step >= 3 ? 'bg-yellow-500 text-black' : 'bg-white/10 text-gray-500'} `}>3</div>
                                <span className={`text - xs uppercase tracking - wider ${step >= 3 ? 'text-white' : 'text-gray-500'} `}>Review</span>
                            </div>
                        </div>

                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-6 p-8">
                            {/* Left Column - Forms */}
                            <div className="lg:col-span-2 space-y-6">
                                {/* Step 1: Shipping Address */}
                                {step === 1 && (
                                    <div className="space-y-6">
                                        <h3 className="text-lg text-white uppercase tracking-wider">Shipping Address</h3>
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                            <input
                                                type="text"
                                                placeholder="Full Name *"
                                                value={shippingAddress.fullName}
                                                onChange={(e) => handleAddressChange('fullName', e.target.value)}
                                                className="px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:border-yellow-500 focus:outline-none transition-all"
                                            />
                                            <input
                                                type="email"
                                                placeholder="Email Address *"
                                                value={shippingAddress.email}
                                                onChange={(e) => handleAddressChange('email', e.target.value)}
                                                className="px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:border-yellow-500 focus:outline-none transition-all"
                                            />
                                            <input
                                                type="tel"
                                                placeholder="Phone Number *"
                                                value={shippingAddress.phone}
                                                onChange={(e) => handleAddressChange('phone', e.target.value)}
                                                className="px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:border-yellow-500 focus:outline-none transition-all"
                                            />
                                            <input
                                                type="text"
                                                placeholder="Pincode *"
                                                value={shippingAddress.pincode}
                                                onChange={(e) => handleAddressChange('pincode', e.target.value)}
                                                className="px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:border-yellow-500 focus:outline-none transition-all"
                                            />
                                        </div>
                                        <textarea
                                            placeholder="Street Address, Apartment, Floor *"
                                            value={shippingAddress.address}
                                            onChange={(e) => handleAddressChange('address', e.target.value)}
                                            rows="3"
                                            className="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:border-yellow-500 focus:outline-none transition-all resize-none"
                                        ></textarea>
                                        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                                            <input
                                                type="text"
                                                placeholder="City *"
                                                value={shippingAddress.city}
                                                onChange={(e) => handleAddressChange('city', e.target.value)}
                                                className="px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:border-yellow-500 focus:outline-none transition-all"
                                            />
                                            <input
                                                type="text"
                                                placeholder="State *"
                                                value={shippingAddress.state}
                                                onChange={(e) => handleAddressChange('state', e.target.value)}
                                                className="px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:border-yellow-500 focus:outline-none transition-all"
                                            />
                                            <input
                                                type="text"
                                                placeholder="Country"
                                                value={shippingAddress.country}
                                                onChange={(e) => handleAddressChange('country', e.target.value)}
                                                className="px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:border-yellow-500 focus:outline-none transition-all"
                                            />
                                        </div>
                                        <button
                                            onClick={handleContinueToPayment}
                                            className="w-full py-4 bg-gradient-to-r from-yellow-600 to-yellow-500 text-black font-bold rounded-xl text-sm uppercase tracking-wider hover:shadow-lg hover:shadow-yellow-500/30 transition-all premium-btn"
                                        >
                                            Continue to Payment
                                        </button>
                                    </div>
                                )}

                                {/* Step 2: Payment Method */}
                                {step === 2 && (
                                    <div className="space-y-6">
                                        <h3 className="text-lg text-white uppercase tracking-wider">Payment Method</h3>

                                        {/* Payment Options */}
                                        <div className="space-y-3">
                                            <div
                                                onClick={() => setPaymentMethod('razorpay')}
                                                className={`p - 4 border rounded - xl cursor - pointer transition - all ${paymentMethod === 'razorpay' ? 'border-yellow-500 bg-yellow-500/10' : 'border-white/10 bg-white/5 hover:border-white/20'} `}
                                            >
                                                <div className="flex items-center gap-3">
                                                    <div className={`w - 5 h - 5 rounded - full border - 2 flex items - center justify - center ${paymentMethod === 'razorpay' ? 'border-yellow-500' : 'border-white/30'} `}>
                                                        {paymentMethod === 'razorpay' && <div className="w-3 h-3 rounded-full bg-yellow-500"></div>}
                                                    </div>
                                                    <div className="flex-1">
                                                        <p className="text-white font-semibold">Razorpay (UPI, Cards, NetBanking)</p>
                                                        <p className="text-xs text-gray-400">Secure payment gateway</p>
                                                    </div>
                                                </div>
                                            </div>

                                            <div
                                                onClick={() => setPaymentMethod('card')}
                                                className={`p - 4 border rounded - xl cursor - pointer transition - all ${paymentMethod === 'card' ? 'border-yellow-500 bg-yellow-500/10' : 'border-white/10 bg-white/5 hover:border-white/20'} `}
                                            >
                                                <div className="flex items-center gap-3">
                                                    <div className={`w - 5 h - 5 rounded - full border - 2 flex items - center justify - center ${paymentMethod === 'card' ? 'border-yellow-500' : 'border-white/30'} `}>
                                                        {paymentMethod === 'card' && <div className="w-3 h-3 rounded-full bg-yellow-500"></div>}
                                                    </div>
                                                    <div className="flex-1">
                                                        <p className="text-white font-semibold">Credit / Debit Card</p>
                                                        <p className="text-xs text-gray-400">Visa, Mastercard, Amex accepted</p>
                                                    </div>
                                                </div>
                                            </div>

                                            <div
                                                onClick={() => setPaymentMethod('cod')}
                                                className={`p - 4 border rounded - xl cursor - pointer transition - all ${paymentMethod === 'cod' ? 'border-yellow-500 bg-yellow-500/10' : 'border-white/10 bg-white/5 hover:border-white/20'} `}
                                            >
                                                <div className="flex items-center gap-3">
                                                    <div className={`w - 5 h - 5 rounded - full border - 2 flex items - center justify - center ${paymentMethod === 'cod' ? 'border-yellow-500' : 'border-white/30'} `}>
                                                        {paymentMethod === 'cod' && <div className="w-3 h-3 rounded-full bg-yellow-500"></div>}
                                                    </div>
                                                    <div className="flex-1">
                                                        <p className="text-white font-semibold">Cash on Delivery</p>
                                                        <p className="text-xs text-gray-400">Pay when you receive</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        {/* Card Details Form (if card selected) */}
                                        {paymentMethod === 'card' && (
                                            <div className="space-y-4 mt-6 p-6 bg-white/5 rounded-xl border border-white/10">
                                                <h4 className="text-sm text-gray-300 uppercase tracking-wider">Card Details</h4>
                                                <input
                                                    type="text"
                                                    placeholder="Card Number"
                                                    value={cardDetails.cardNumber}
                                                    onChange={(e) => handleCardDetailChange('cardNumber', e.target.value)}
                                                    maxLength="16"
                                                    className="w-full px-4 py-3 bg-black/50 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:border-yellow-500 focus:outline-none transition-all"
                                                />
                                                <input
                                                    type="text"
                                                    placeholder="Cardholder Name"
                                                    value={cardDetails.cardName}
                                                    onChange={(e) => handleCardDetailChange('cardName', e.target.value)}
                                                    className="w-full px-4 py-3 bg-black/50 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:border-yellow-500 focus:outline-none transition-all"
                                                />
                                                <div className="grid grid-cols-2 gap-4">
                                                    <input
                                                        type="text"
                                                        placeholder="MM/YY"
                                                        value={cardDetails.expiryDate}
                                                        onChange={(e) => handleCardDetailChange('expiryDate', e.target.value)}
                                                        maxLength="5"
                                                        className="px-4 py-3 bg-black/50 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:border-yellow-500 focus:outline-none transition-all"
                                                    />
                                                    <input
                                                        type="text"
                                                        placeholder="CVV"
                                                        value={cardDetails.cvv}
                                                        onChange={(e) => handleCardDetailChange('cvv', e.target.value)}
                                                        maxLength="3"
                                                        className="px-4 py-3 bg-black/50 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:border-yellow-500 focus:outline-none transition-all"
                                                    />
                                                </div>
                                            </div>
                                        )}

                                        <div className="flex gap-3">
                                            <button
                                                onClick={() => setStep(1)}
                                                className="flex-1 py-4 border border-white/20 text-white rounded-xl text-sm uppercase tracking-wider hover:bg-white/10 transition-all"
                                            >
                                                Back
                                            </button>
                                            <button
                                                onClick={() => setStep(3)}
                                                className="flex-1 py-4 bg-gradient-to-r from-yellow-600 to-yellow-500 text-black font-bold rounded-xl text-sm uppercase tracking-wider hover:shadow-lg hover:shadow-yellow-500/30 transition-all premium-btn"
                                            >
                                                Review Order
                                            </button>
                                        </div>
                                    </div>
                                )}

                                {/* Step 3: Review Order */}
                                {step === 3 && (
                                    <div className="space-y-6">
                                        <h3 className="text-lg text-white uppercase tracking-wider">Review Your Order</h3>

                                        {/* Shipping Address Summary */}
                                        <div className="p-6 bg-white/5 rounded-xl border border-white/10">
                                            <div className="flex items-center justify-between mb-4">
                                                <h4 className="text-sm text-gray-300 uppercase tracking-wider">Shipping Address</h4>
                                                <button onClick={() => setStep(1)} className="text-xs text-yellow-500 hover:underline">Edit</button>
                                            </div>
                                            <p className="text-white font-semibold">{shippingAddress.fullName}</p>
                                            <p className="text-sm text-gray-400">{shippingAddress.address}</p>
                                            <p className="text-sm text-gray-400">{shippingAddress.city}, {shippingAddress.state} - {shippingAddress.pincode}</p>
                                            <p className="text-sm text-gray-400">{shippingAddress.country}</p>
                                            <p className="text-sm text-gray-400 mt-2">Phone: {shippingAddress.phone}</p>
                                            <p className="text-sm text-gray-400">Email: {shippingAddress.email}</p>
                                        </div>

                                        {/* Payment Method Summary */}
                                        <div className="p-6 bg-white/5 rounded-xl border border-white/10">
                                            <div className="flex items-center justify-between mb-4">
                                                <h4 className="text-sm text-gray-300 uppercase tracking-wider">Payment Method</h4>
                                                <button onClick={() => setStep(2)} className="text-xs text-yellow-500 hover:underline">Edit</button>
                                            </div>
                                            <p className="text-white font-semibold">
                                                {paymentMethod === 'razorpay' && 'Razorpay (UPI, Cards, NetBanking)'}
                                                {paymentMethod === 'card' && 'Credit / Debit Card'}
                                                {paymentMethod === 'cod' && 'Cash on Delivery'}
                                            </p>
                                        </div>

                                        <div className="flex gap-3">
                                            <button
                                                onClick={() => setStep(2)}
                                                className="flex-1 py-4 border border-white/20 text-white rounded-xl text-sm uppercase tracking-wider hover:bg-white/10 transition-all"
                                            >
                                                Back
                                            </button>
                                            <button
                                                onClick={handlePlaceOrder}
                                                disabled={isProcessing}
                                                className="flex-1 py-4 bg-gradient-to-r from-green-600 to-green-500 text-white font-bold rounded-xl text-sm uppercase tracking-wider hover:shadow-lg hover:shadow-green-500/30 transition-all premium-btn disabled:opacity-50 disabled:cursor-not-allowed"
                                            >
                                                {isProcessing ? 'Processing...' : 'Place Order'}
                                            </button>
                                        </div>
                                    </div>
                                )}
                            </div>

                            {/* Right Column - Order Summary */}
                            <div className="lg:col-span-1">
                                <div className="sticky top-8 p-6 bg-white/5 rounded-xl border border-white/10 space-y-4">
                                    <h3 className="text-lg text-white uppercase tracking-wider border-b border-white/10 pb-4">Order Summary</h3>

                                    {/* Products */}
                                    <div className="space-y-3 max-h-64 overflow-y-auto">
                                        {items.map((item, idx) => (
                                            <div key={idx} className="flex gap-3 items-center">
                                                <img
                                                    src={item.productDetails?.image_url || item.image}
                                                    alt={item.productDetails?.name || item.name}
                                                    className="w-12 h-12 rounded-lg object-cover"
                                                    onError={(e) => {
                                                        e.target.onerror = null;
                                                        e.target.src = 'https://via.placeholder.com/48?text=No+Img';
                                                    }}
                                                />
                                                <div className="flex-1">
                                                    <p className="text-xs text-white">{item.productDetails?.name || item.name}</p>
                                                    <p className="text-[10px] text-gray-500">Qty: {item.quantity}</p>
                                                </div>
                                                <span className="text-xs text-yellow-400">
                                                    {(item.price * item.quantity).toLocaleString('en-IN')}
                                                </span>
                                            </div>
                                        ))}
                                    </div>

                                    {/* Price Breakdown */}
                                    <div className="space-y-2 border-t border-white/10 pt-4">
                                        <div className="flex justify-between text-sm">
                                            <span className="text-gray-400">Subtotal</span>
                                            <span className="text-white">{subtotal.toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</span>
                                        </div>
                                        <div className="flex justify-between text-sm">
                                            <span className="text-gray-400">Shipping</span>
                                            <span className="text-white">{shipping === 0 ? 'FREE' : `${shipping.toLocaleString('en-IN')} `}</span>
                                        </div>
                                        <div className="flex justify-between text-sm">
                                            <span className="text-gray-400">Tax (GST 18%)</span>
                                            <span className="text-white">{tax.toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</span>
                                        </div>
                                        <div className="flex justify-between text-lg font-bold border-t border-white/10 pt-3">
                                            <span className="text-white">Total</span>
                                            <span className="text-yellow-400">{total.toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</span>
                                        </div>
                                    </div>

                                    {/* Free Shipping Notice */}
                                    {subtotal > 0 && subtotal < 5000 && (
                                        <div className="p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-lg">
                                            <p className="text-xs text-yellow-400">Add {(5000 - subtotal).toLocaleString('en-IN')} more for FREE shipping!</p>
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        /* ====================== CART & PROFILE PANELS ====================== */

        const CartDrawer = ({ open, items, onClose, onClear, onCheckout }) => {
            if (!open) return null;
            const total = items.reduce((sum, p) => sum + p.price, 0);

            return (
                <div className="fixed inset-0 z-50 flex justify-end success-overlay" onClick={onClose}>
                    <div className="w-full max-w-md h-full flex flex-col bg-black/85 border-l border-white/10"
                        style={{ animation: 'macSlideIn 0.24s ease-out' }}
                        onClick={(e) => e.stopPropagation()}>
                        <div className="flex items-center justify-between px-6 py-5 border-b border-white/10">
                            <h3 className="text-sm uppercase tracking-[0.25em] text-gray-300">Cart</h3>
                            <button onClick={onClose} className="text-gray-400 hover:text-white transition-colors" aria-label="Close cart">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                                    <line x1="18" y1="6" x2="6" y2="18"></line>
                                    <line x1="6" y1="6" x2="18" y2="18"></line>
                                </svg>
                            </button>
                        </div>
                        <div className="flex-1 overflow-y-auto p-6 space-y-4">
                            {items.length === 0 && (
                                <p className="text-xs text-gray-500">Nothing here yet. Let Gamma nudge you towards something useful.</p>
                            )}
                            {items.map((item, idx) => (
                                <div key={idx} className="flex gap-3 items-center">
                                    <img
                                        src={item.productDetails?.image_url || item.image}
                                        alt={item.productDetails?.name || item.name}
                                        className="w-14 h-14 rounded-xl object-cover"
                                        onError={(e) => {
                                            e.target.onerror = null;
                                            e.target.src = 'https://via.placeholder.com/56?text=No+Img';
                                        }}
                                    />
                                    <div className="flex-1">
                                        <p className="text-sm text-white">{item.productDetails?.name || item.name}</p>
                                        <p className="text-[11px] text-gray-500 uppercase tracking-[0.2em]">{item.productDetails?.category || item.category}</p>
                                    </div>
                                    <span className="text-sm text-yellow-400">
                                        {item.price.toLocaleString('en-IN')}
                                    </span>
                                </div>
                            ))}
                        </div>
                        <div className="px-6 py-4 border-t border-white/10 space-y-4">
                            <div className="flex items-center justify-between">
                                <div className="text-left">
                                    <span className="block text-[11px] text-gray-500 uppercase tracking-[0.2em]">Total</span>
                                    <span className="text-sm text-white font-semibold">
                                        {total.toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}
                                    </span>
                                </div>
                                <button
                                    onClick={onClear}
                                    disabled={items.length === 0}
                                    className={`text - [11px] uppercase tracking - [0.2em] rounded - full px - 4 py - 2 border 
                                               ${items.length === 0 ? 'border-white/10 text-gray-500 cursor-not-allowed' : 'border-white/20 text-gray-200 hover:bg-white/10'} `}
                                >
                                    Clear All
                                </button>
                            </div>
                            <button
                                onClick={onCheckout}
                                disabled={items.length === 0}
                                className={`w - full py - 3 rounded - full text - xs uppercase tracking - [0.25em] font - bold transition - all
                                           ${items.length === 0
                                        ? 'bg-white/5 text-gray-500 cursor-not-allowed border border-white/5'
                                        : 'bg-gradient-to-r from-yellow-600 to-yellow-500 text-black premium-btn shadow-lg shadow-yellow-600/20'
                                    } `}
                            >
                                Proceed to Checkout
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        const ProfilePanel = ({ open, onClose }) => {
            if (!open) return null;
            return (
                <div className="fixed inset-0 z-50 flex items-center justify-center success-overlay" onClick={onClose}>
                    <div className="liquid-glass rounded-3xl p-8 w-full max-w-md"
                        style={{ animation: 'macOpen 0.23s ease-out' }}
                        onClick={(e) => e.stopPropagation()}>
                        <div className="flex items-center justify-between mb-4">
                            <h3 className="text-sm uppercase tracking-[0.25em] text-gray-300">Profile</h3>
                            <button onClick={onClose} className="text-gray-400 hover:text-white transition-colors" aria-label="Close profile">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                                    <line x1="18" y1="6" x2="6" y2="18"></line>
                                    <line x1="6" y1="6" x2="18" y2="18"></line>
                                </svg>
                            </button>
                        </div>
                        <h2 className="font-serif text-2xl text-white mb-2">Gamma ID</h2>
                        <p className="text-sm text-gray-300 mb-6">
                            This is your space to sync preferences, saved kits and upcoming trips. For now, everything runs locally in this demo.
                        </p>
                        <div className="space-y-3">
                            <button className="w-full premium-btn bg-white text-black text-xs uppercase tracking-[0.25em] py-3 rounded-full">
                                Sign in with Email
                            </button>
                            <button className="w-full border border-white/15 text-xs uppercase tracking-[0.25em] py-3 rounded-full text-gray-200 hover:bg-white/5">
                                Create Member Profile
                            </button>
                        </div>
                        <p className="mt-4 text-[11px] text-gray-500 leading-relaxed">
                            Once live, Gamma ID will let your AI companion remember how you like to travel
                             bags, loadouts, even preferred seat rows.
                        </p>
                    </div>
                </div>
            );
        };

        /* ====================== SMART SEARCH COMPONENT ====================== */
        const SmartSearchBar = ({ isOpen, onClose, onProductSelect }) => {
            const [searchQuery, setSearchQuery] = useState('');
            const [suggestions, setSuggestions] = useState([]);
            const [selectedIndex, setSelectedIndex] = useState(-1);
            const [searchHistory, setSearchHistory] = useState([]);
            const inputRef = useRef(null);

            React.useEffect(() => {
                const history = JSON.parse(localStorage.getItem('searchHistory') || '[]');
                setSearchHistory(history);
            }, []);

            React.useEffect(() => {
                if (isOpen && inputRef.current) {
                    inputRef.current.focus();
                }
            }, [isOpen]);

            React.useEffect(() => {
                if (searchQuery.trim().length >= 2) {
                    const results = getSearchSuggestions(PRODUCTS, searchQuery, 8);
                    setSuggestions(results);
                } else if (searchQuery.trim().length === 0) {
                    const popular = getPopularProducts(PRODUCTS, 6);
                    setSuggestions(popular);
                } else {
                    setSuggestions([]);
                }
                setSelectedIndex(-1);
            }, [searchQuery]);

            const handleKeyDown = (e) => {
                if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    setSelectedIndex(prev => Math.min(prev + 1, suggestions.length - 1));
                } else if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    setSelectedIndex(prev => Math.max(prev - 1, -1));
                } else if (e.key === 'Enter' && selectedIndex >= 0) {
                    e.preventDefault();
                    handleSelectProduct(suggestions[selectedIndex]);
                } else if (e.key === 'Escape') {
                    handleClose();
                }
            };

            const handleSelectProduct = (product) => {
                const newHistory = [product.name, ...searchHistory.filter(h => h !== product.name)].slice(0, 10);
                localStorage.setItem('searchHistory', JSON.stringify(newHistory));
                setSearchHistory(newHistory);

                onProductSelect(product);
                handleClose();
            };

            const handleClose = () => {
                setSearchQuery('');
                setSuggestions([]);
                setSelectedIndex(-1);
                onClose();
            };

            if (!isOpen) return null;

            return (
                <>
                    <div className="fixed inset-0 bg-black/60 backdrop-blur-sm z-50" onClick={handleClose} />
                    <div className="fixed top-0 left-0 right-0 z-50 pt-20 px-4">
                        <div className="max-w-3xl mx-auto">
                            <div className="liquid-glass rounded-2xl p-6 mb-4">
                                <div className="flex items-center gap-4">
                                    <svg className="w-6 h-6 text-yellow-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                                    </svg>
                                    <input
                                        ref={inputRef}
                                        type="text"
                                        value={searchQuery}
                                        onChange={(e) => setSearchQuery(e.target.value)}
                                        onKeyDown={handleKeyDown}
                                        placeholder="Search for products... (Try: MacBook, linen shirt, cargo pants)"
                                        className="flex-1 bg-transparent text-white text-lg outline-none placeholder-gray-400"
                                    />
                                    {searchQuery && (
                                        <button onClick={() => setSearchQuery('')} className="text-gray-400 hover:text-white transition-colors">
                                            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                                            </svg>
                                        </button>
                                    )}
                                    <button onClick={handleClose} className="text-gray-400 hover:text-white transition-colors ml-2">
                                        <span className="text-sm uppercase tracking-wider">ESC</span>
                                    </button>
                                </div>
                            </div>

                            {suggestions.length > 0 && (
                                <div className="liquid-glass rounded-2xl p-4 max-h-[60vh] overflow-y-auto">
                                    <p className="text-xs uppercase tracking-wide text-gray-400 mb-3 px-2">
                                        {searchQuery.trim().length === 0 ? 'Popular Products' : `${suggestions.length} Results`}
                                    </p>
                                    <div className="space-y-2">
                                        {suggestions.map((product, index) => (
                                            <div
                                                key={product.id}
                                                onClick={() => handleSelectProduct(product)}
                                                className={`flex items-center gap-4 p-3 rounded-xl cursor-pointer transition-all ${selectedIndex === index
                                                    ? 'bg-white/10 border border-yellow-500/30'
                                                    : 'hover:bg-white/5 border border-transparent'
                                                    }`}
                                            >
                                                <img
                                                    src={product.image_url}
                                                    alt={product.name}
                                                    className="w-16 h-16 object-cover rounded-lg flex-shrink-0"
                                                />
                                                <div className="flex-1 min-w-0">
                                                    <h4 className="text-white font-medium truncate">{product.name}</h4>
                                                    <p className="text-sm text-gray-400 capitalize">{product.category}  {product.subcategory}</p>
                                                </div>
                                                <div className="text-right">
                                                    <p className="text-yellow-500 font-bold">{product.price.toLocaleString('en-IN')}</p>
                                                    {product.originalPrice && (
                                                        <p className="text-xs text-gray-500 line-through">{product.originalPrice.toLocaleString('en-IN')}</p>
                                                    )}
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            )}

                            {searchQuery.trim().length >= 2 && suggestions.length === 0 && (
                                <div className="liquid-glass rounded-2xl p-8 text-center">
                                    <p className="text-gray-400 mb-2">No products found for "{searchQuery}"</p>
                                    <p className="text-sm text-gray-500">Try searching for: MacBook, T-Shirt, Jeans, or Headphones</p>
                                </div>
                            )}
                        </div>
                    </div>
                </>
            );
        };

        /* ====================== CHATBOT COMPONENT ====================== */
        const Chatbot = () => {
            const [isOpen, setIsOpen] = useState(false);
            const [messages, setMessages] = useState([]);
            const [inputMessage, setInputMessage] = useState('');
            const [isTyping, setIsTyping] = useState(false);
            const messagesEndRef = useRef(null);
            const inputRef = useRef(null);

            React.useEffect(() => {
                if (messages.length === 0) {
                    setMessages([{
                        id: 1,
                        type: 'bot',
                        text: getWelcomeMessage(),
                        timestamp: new Date()
                    }]);
                }
            }, []);

            React.useEffect(() => {
                messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
            }, [messages]);

            React.useEffect(() => {
                if (isOpen && inputRef.current) {
                    inputRef.current.focus();
                }
            }, [isOpen]);

            const addMessage = (text, type = 'user') => {
                const newMessage = {
                    id: Date.now(),
                    type,
                    text,
                    timestamp: new Date()
                };
                setMessages(prev => [...prev, newMessage]);
            };

            const handleSendMessage = () => {
                if (!inputMessage.trim()) return;
                addMessage(inputMessage, 'user');
                const userMsg = inputMessage;
                setInputMessage('');
                setIsTyping(true);
                setTimeout(() => {
                    const response = getChatbotResponse(userMsg);
                    addMessage(response, 'bot');
                    setIsTyping(false);
                }, 800);
            };

            const handleQuickAction = (actionId) => {
                const action = QUICK_ACTIONS[actionId];
                if (action) {
                    addMessage(action.label, 'user');
                    setIsTyping(true);
                    setTimeout(() => {
                        addMessage(action.response, 'bot');
                        setIsTyping(false);
                    }, 600);
                }
            };

            const handleKeyPress = (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    handleSendMessage();
                }
            };

            return (
                <>
                    <button
                        onClick={() => setIsOpen(!isOpen)}
                        className={`fixed bottom-6 right-6 z-50 w-16 h-16 rounded-full bg-gradient-to-r from-yellow-600 to-yellow-500 text-black shadow-lg hover:shadow-2xl transition-all duration-300 flex items-center justify-center group ${isOpen ? 'scale-0' : 'scale-100'
                            }`}
                    >
                        <svg className="w-8 h-8 group-hover:scale-110 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" />
                        </svg>
                        <span className="absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full animate-pulse"></span>
                    </button>

                    <div
                        className={`fixed bottom-6 right-6 z-50 w-96 max-w-[calc(100vw-3rem)] transition-all duration-300 ${isOpen ? 'scale-100 opacity-100' : 'scale-0 opacity-0 pointer-events-none'
                            }`}
                        style={{ transformOrigin: 'bottom right' }}
                    >
                        <div className="liquid-glass rounded-2xl overflow-hidden shadow-2xl flex flex-col h-[600px] max-h-[80vh]">
                            <div className="bg-gradient-to-r from-yellow-600 to-yellow-500 p-4 flex items-center justify-between">
                                <div className="flex items-center gap-3">
                                    <div className="w-10 h-10 rounded-full bg-black/20 flex items-center justify-center">
                                        <svg className="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                                        </svg>
                                    </div>
                                    <div>
                                        <h3 className="text-black font-bold">GAMMA Assistant</h3>
                                        <p className="text-xs text-black/70">Always here to help</p>
                                    </div>
                                </div>
                                <button onClick={() => setIsOpen(false)} className="text-black/70 hover:text-black transition-colors">
                                    <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                                    </svg>
                                </button>
                            </div>

                            <div className="flex-1 overflow-y-auto p-4 space-y-4">
                                {messages.map((msg) => (
                                    <div key={msg.id} className={`flex ${msg.type === 'user' ? 'justify-end' : 'justify-start'}`}>
                                        <div
                                            className={`max-w-[80%] px-4 py-3 rounded-2xl ${msg.type === 'user'
                                                ? 'bg-yellow-500 text-black'
                                                : 'bg-white/10 text-white'
                                                }`}
                                            style={{ whiteSpace: 'pre-line' }}
                                        >
                                            {msg.text}
                                        </div>
                                    </div>
                                ))}

                                {isTyping && (
                                    <div className="flex justify-start">
                                        <div className="bg-white/10 px-4 py-3 rounded-2xl">
                                            <div className="flex gap-1">
                                                <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style={{ animationDelay: '0ms' }}></div>
                                                <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style={{ animationDelay: '150ms' }}></div>
                                                <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style={{ animationDelay: '300ms' }}></div>
                                            </div>
                                        </div>
                                    </div>
                                )}

                                <div ref={messagesEndRef} />
                            </div>

                            {messages.length <= 2 && (
                                <div className="px-4 pb-3">
                                    <p className="text-xs text-gray-400 mb-2">Quick Actions:</p>
                                    <div className="grid grid-cols-2 gap-2">
                                        {Object.entries(QUICK_ACTIONS).map(([id, action]) => (
                                            <button
                                                key={id}
                                                onClick={() => handleQuickAction(id)}
                                                className="text-xs px-3 py-2 bg-white/5 hover:bg-white/10 rounded-lg text-white transition-colors border border-white/10"
                                            >
                                                {action.label}
                                            </button>
                                        ))}
                                    </div>
                                </div>
                            )}

                            <div className="p-4 border-t border-white/10">
                                <div className="flex gap-2">
                                    <input
                                        ref={inputRef}
                                        type="text"
                                        value={inputMessage}
                                        onChange={(e) => setInputMessage(e.target.value)}
                                        onKeyPress={handleKeyPress}
                                        placeholder="Type your message..."
                                        className="flex-1 px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-400 outline-none focus:border-yellow-500/50 transition-colors text-sm"
                                    />
                                    <button
                                        onClick={handleSendMessage}
                                        disabled={!inputMessage.trim()}
                                        className="px-4 py-3 bg-yellow-500 hover:bg-yellow-600 disabled:bg-gray-700 disabled:cursor-not-allowed rounded-xl transition-colors flex-shrink-0"
                                    >
                                        <svg className="w-5 h-5 text-black" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </>
            );
        };

        /* ====================== APP ====================== */

        const App = () => {
            const [isAuthed, setIsAuthed] = useState(false);

            // ===== NEW DATABASE SCHEMA STATE MANAGEMENT =====

            // USER table state
            const [currentUser, setCurrentUser] = useState(null); // {id, username, email, password, is_staff, date_joined}
            const [users, setUsers] = useState([]); // All users (would be in backend DB)

            // CART & CART_ITEM table state
            const [cartData, setCartData] = useState({
                id: null,
                session_id: null,
                user_id: null,
                created_at: null
            }); // CART table
            const [cart, setCart] = useState([]); // CART_ITEM table: [{id, cart_id, product_id, quantity, price}]

            // ORDER & ORDER_ITEM table state
            const [orders, setOrders] = useState([]); // ORDER table: [{id, user_id, total_amount, status, address, created_at}]
            const [orderItems, setOrderItems] = useState([]); // ORDER_ITEM table

            // REVIEW table state
            const [reviews, setReviews] = useState([]); // REVIEW table: [{id, user_id, product_id, rating, comment, created_at}]

            // PAYMENT table state
            const [payments, setPayments] = useState([]); // PAYMENT table: [{id, order_id, razorpay_order_id, razorpay_payment_id, status, amount, created_at}]

            // WISHLIST state
            const [wishlist, setWishlist] = useState([]); // Array of product IDs

            // ===== EXISTING UI STATE =====
            const [searchQuery, setSearchQuery] = useState("");
            const [selectedProduct, setSelectedProduct] = useState(null);
            const [activeTab, setActiveTab] = useState("home");
            const [cartOpen, setCartOpen] = useState(false);
            const [profileOpen, setProfileOpen] = useState(false);
            const [isCategoryMenuOpen, setIsCategoryMenuOpen] = useState(false);
            const [theme, setTheme] = useState('light');
            const [flyingProducts, setFlyingProducts] = useState([]);
            const [cartPulse, setCartPulse] = useState(false);
            const [showSearch, setShowSearch] = useState(false);
            const [checkoutOpen, setCheckoutOpen] = useState(false);
            const cartIconRef = useRef(null);



            // Apply theme to body element
            React.useEffect(() => {
                if (theme === 'light') {
                    document.body.classList.add('light-mode');
                } else {
                    document.body.classList.remove('light-mode');
                }
            }, [theme]);

            // ===== HELPER FUNCTIONS FOR SCHEMA =====

            // Generate unique session ID (would normally come from backend)
            const generateSessionId = () => {
                return 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            };

            // Generate unique ID for database records
            const generateId = () => {
                return Date.now() + Math.floor(Math.random() * 1000);
            };

            // Initialize cart with session_id on component mount
            React.useEffect(() => {
                if (!cartData.id) {
                    const newCartId = generateId();
                    const sessionId = generateSessionId();
                    setCartData({
                        id: newCartId,
                        session_id: sessionId,
                        user_id: currentUser?.id || null,
                        created_at: new Date().toISOString()
                    });
                }
            }, []);

            // Update cart user_id when user logs in/out
            React.useEffect(() => {
                if (cartData.id) {
                    setCartData(prev => ({
                        ...prev,
                        user_id: currentUser?.id || null
                    }));
                }
            }, [currentUser]);

            const toggleTheme = () => {
                setTheme(prev => prev === 'dark' ? 'light' : 'dark');
            };

            const handleToggleWishlist = (product) => {
                setWishlist(prev => {
                    if (prev.includes(product.id)) {
                        return prev.filter(id => id !== product.id);
                    } else {
                        return [...prev, product.id];
                    }
                });
            };



            const handleAddToCart = (product, event) => {
                // Trigger button press animation
                const button = event?.currentTarget;
                if (button) {
                    button.classList.add('btn-pressed');
                    setTimeout(() => button.classList.remove('btn-pressed'), 150);
                }

                // Get product card and cart icon positions
                const productCard = event?.currentTarget?.closest('.glass-card');
                const productRect = productCard?.getBoundingClientRect();
                const cartRect = cartIconRef.current?.getBoundingClientRect();

                if (productRect && cartRect) {
                    // Calculate start and end positions for flying animation
                    const startX = productRect.left + productRect.width / 2 - 40;
                    const startY = productRect.top + productRect.height / 2 - 40;
                    const endX = cartRect.left + cartRect.width / 2 - 40;
                    const endY = cartRect.top + cartRect.height / 2 - 40;

                    // Launch flying product animation
                    const productId = Date.now() + Math.random();
                    setFlyingProducts(prev => [...prev, {
                        id: productId,
                        image: product.image_url,
                        startX,
                        startY,
                        endX,
                        endY
                    }]);

                    // Add to cart after animation starts (750ms for smooth UX)
                    setTimeout(() => {
                        // Create CART_ITEM following schema: {id, cart_id, product_id, quantity, price}
                        const existingItem = cart.find(item => item.product_id === product.id);

                        if (existingItem) {
                            // Update quantity if item already in cart
                            setCart(prev => prev.map(item =>
                                item.product_id === product.id
                                    ? { ...item, quantity: item.quantity + 1 }
                                    : item
                            ));
                        } else {
                            // Add new cart item
                            const newCartItem = {
                                id: generateId(),
                                cart_id: cartData.id,
                                product_id: product.id,
                                quantity: 1,
                                price: product.price,
                                // Store product details for display (not in schema but useful for UI)
                                productDetails: {
                                    name: product.name,
                                    image_url: product.image_url,
                                    category: product.category
                                }
                            };
                            setCart(prev => [...prev, newCartItem]);
                        }

                        // Trigger cart pulse feedback
                        setCartPulse(true);
                        setTimeout(() => setCartPulse(false), 500);
                    }, 750);
                } else {
                    // Fallback: instant add if positions unavailable
                    const existingItem = cart.find(item => item.product_id === product.id);

                    if (existingItem) {
                        setCart(prev => prev.map(item =>
                            item.product_id === product.id
                                ? { ...item, quantity: item.quantity + 1 }
                                : item
                        ));
                    } else {
                        const newCartItem = {
                            id: generateId(),
                            cart_id: cartData.id,
                            product_id: product.id,
                            quantity: 1,
                            price: product.price,
                            productDetails: {
                                name: product.name,
                                image_url: product.image_url,
                                category: product.category
                            }
                        };
                        setCart(prev => [...prev, newCartItem]);
                    }
                }
            };

            // ===== ORDER MANAGEMENT FUNCTIONS =====

            // Create order from current cart
            const createOrder = (deliveryAddress) => {
                if (!currentUser) {
                    alert('Please log in to create an order');
                    return null;
                }

                if (cart.length === 0) {
                    alert('Cart is empty');
                    return null;
                }

                // Calculate total amount
                const totalAmount = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);

                // Create ORDER
                const newOrder = {
                    id: generateId(),
                    user_id: currentUser.id,
                    total_amount: totalAmount,
                    status: 'pending',
                    address: deliveryAddress,
                    created_at: new Date().toISOString()
                };

                // Create ORDER_ITEMs
                const newOrderItems = cart.map(cartItem => ({
                    id: generateId(),
                    order_id: newOrder.id,
                    product_id: cartItem.product_id,
                    quantity: cartItem.quantity,
                    price: cartItem.price
                }));

                // Update state
                setOrders(prev => [...prev, newOrder]);
                setOrderItems(prev => [...prev, ...newOrderItems]);

                console.log('Order created:', newOrder);
                console.log('Order items:', newOrderItems);

                return newOrder;
            };

            // Update order status
            const updateOrderStatus = (orderId, newStatus) => {
                setOrders(prev => prev.map(order =>
                    order.id === orderId
                        ? { ...order, status: newStatus }
                        : order
                ));
            };

            // ===== REVIEW MANAGEMENT FUNCTIONS =====

            // Submit product review
            const submitReview = (productId, rating, comment) => {
                if (!currentUser) {
                    alert('Please log in to submit a review');
                    return null;
                }

                const newReview = {
                    id: generateId(),
                    user_id: currentUser.id,
                    product_id: productId,
                    rating: rating, // integer (1-5)
                    comment: comment,
                    created_at: new Date().toISOString()
                };

                setReviews(prev => [...prev, newReview]);
                console.log('Review submitted:', newReview);

                return newReview;
            };

            // Get reviews for a product
            const getProductReviews = (productId) => {
                return reviews.filter(review => review.product_id === productId);
            };

            // Get average rating for a product
            const getAverageRating = (productId) => {
                const productReviews = getProductReviews(productId);
                if (productReviews.length === 0) return 0;

                const totalRating = productReviews.reduce((sum, review) => sum + review.rating, 0);
                return (totalRating / productReviews.length).toFixed(1);
            };

            // ===== PAYMENT MANAGEMENT FUNCTIONS =====

            // Create payment record for order
            const createPayment = (orderId, razorpayOrderId = null) => {
                const order = orders.find(o => o.id === orderId);
                if (!order) {
                    console.error('Order not found');
                    return null;
                }

                const newPayment = {
                    id: generateId(),
                    order_id: orderId,
                    razorpay_order_id: razorpayOrderId,
                    razorpay_payment_id: null, // Set after payment completion
                    status: 'pending',
                    amount: order.total_amount,
                    created_at: new Date().toISOString()
                };

                setPayments(prev => [...prev, newPayment]);
                console.log('Payment record created:', newPayment);

                return newPayment;
            };

            // Update payment status (after Razorpay callback)
            const updatePaymentStatus = (paymentId, razorpayPaymentId, status) => {
                setPayments(prev => prev.map(payment =>
                    payment.id === paymentId
                        ? {
                            ...payment,
                            razorpay_payment_id: razorpayPaymentId,
                            status: status
                        }
                        : payment
                ));

                // Update order status if payment completed
                if (status === 'completed') {
                    const payment = payments.find(p => p.id === paymentId);
                    if (payment) {
                        updateOrderStatus(payment.order_id, 'processing');
                    }
                }
            };

            // Initiate Razorpay payment (mock implementation - requires backend)
            const initiateRazorpayPayment = (orderId, deliveryAddress) => {
                // First create the order
                const order = createOrder(deliveryAddress);
                if (!order) return;

                // Create payment record
                // In production, you would call backend API to create Razorpay order
                const razorpayOrderId = 'order_' + generateId(); // Mock Razorpay order ID
                const payment = createPayment(order.id, razorpayOrderId);

                // Mock Razorpay integration
                console.log('=== RAZORPAY PAYMENT MOCK ===');
                console.log('Order:', order);
                console.log('Payment:', payment);
                console.log('In production, Razorpay checkout would open here');

                // Simulate successful payment after 2 seconds
                setTimeout(() => {
                    const mockRazorpayPaymentId = 'pay_' + generateId();
                    updatePaymentStatus(payment.id, mockRazorpayPaymentId, 'completed');
                    setCart([]); // Clear cart after successful payment
                    alert('Payment successful! Order placed.');
                }, 2000);
            };

            // Handle order placement from CheckoutPage
            const handlePlaceOrder = (orderData) => {
                // Create order from checkout data
                const order = createOrder(orderData.address);
                if (!order) return;

                // Create payment record based on payment method
                if (orderData.paymentMethod === 'razorpay' || orderData.paymentMethod === 'card') {
                    const razorpayOrderId = 'order_' + generateId();
                    const payment = createPayment(order.id, razorpayOrderId);

                    console.log('=== ORDER PLACED ===');
                    console.log('Order:', order);
                    console.log('Payment Method:', orderData.paymentMethod);
                    console.log('Payment:', payment);

                    // Simulate payment processing
                    setTimeout(() => {
                        const mockRazorpayPaymentId = 'pay_' + generateId();
                        updatePaymentStatus(payment.id, mockRazorpayPaymentId, 'completed');
                        setCart([]); // Clear cart after successful payment
                        setCheckoutOpen(false); // Close checkout
                        alert(` Order Placed Successfully!\n\nOrder ID: ${order.id} \nTotal: ${orderData.total.toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 })} \n\nYou will receive a confirmation email shortly.`);
                    }, 2000);
                } else if (orderData.paymentMethod === 'cod') {
                    // Cash on Delivery
                    console.log('=== ORDER PLACED (COD) ===');
                    console.log('Order:', order);
                    console.log('Payment Method: Cash on Delivery');

                    updateOrderStatus(order.id, 'confirmed');
                    setCart([]); // Clear cart
                    setCheckoutOpen(false); // Close checkout
                    alert(` Order Placed Successfully!\n\nOrder ID: ${order.id} \nTotal: ${orderData.total.toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 })} \nPayment Method: Cash on Delivery\n\nYou will receive a confirmation email shortly.`);
                }
            };


            const removeFlyingProduct = (productId) => {
                setFlyingProducts(prev => prev.filter(p => p.id !== productId));
            };

            const handleOpenProduct = (product) => {
                setSelectedProduct(product);
            };

            const handleNavChange = (tab) => {
                setActiveTab(tab);
            };

            const handleCategorySelect = (categoryId) => {
                setActiveTab(categoryId);
            };

            // Filter products: only show active products (is_active = true)
            const activeProducts = PRODUCTS.filter(p => p.is_active === true);

            const filteredBySearch = activeProducts.filter(p => {
                const query = searchQuery.toLowerCase();
                return p.name.toLowerCase().includes(query) ||
                    p.category.toLowerCase().includes(query) ||
                    p.subcategory?.toLowerCase().includes(query) ||
                    p.description?.toLowerCase().includes(query) ||
                    p.tag?.toLowerCase().includes(query) ||
                    p.features?.some(f => f.toLowerCase().includes(query));
            });

            let visibleProducts = filteredBySearch;
            let gridTitle = "Our Collection";
            let gridSubtitle = "Discover amazing products";

            // Filter by category
            if (activeTab === "men") {
                visibleProducts = filteredBySearch.filter(p => p.category === "men");
                gridTitle = "For Men";
                gridSubtitle = "Explore men's collection";
            } else if (activeTab === "women") {
                visibleProducts = filteredBySearch.filter(p => p.category === "women");
                gridTitle = "For Women";
                gridSubtitle = "Explore women's collection";
            } else if (activeTab === "electronics") {
                visibleProducts = filteredBySearch.filter(p => p.category === "electronics");
                gridTitle = "Electronics";
                gridSubtitle = "Explore latest gadgets";
            } else if (activeTab === "wwe") {
                visibleProducts = filteredBySearch.filter(p => p.category === "wwe");
                gridTitle = "WWE Merchandise";
                gridSubtitle = "Official WWE merch collection";
            } else if (activeTab === "all") {
                visibleProducts = filteredBySearch;
                gridTitle = "All Products";
                gridSubtitle = "Explore our entire collection";
            } else if (activeTab === "new") {
                visibleProducts = filteredBySearch.filter(p => p.tag === "New");
                gridTitle = "New Arrivals";
                gridSubtitle = "Fresh releases & latest drops";
            }

            const handleLogin = (user) => {
                setCurrentUser(user);
                setIsAuthed(true);
            };

            if (!isAuthed) {
                return <AuthScreen onLogin={handleLogin} />;
            }

            return (
                <div className="min-h-screen bg-black relative">
                    <div className="ambient-blob blob-1"></div>
                    <div className="ambient-blob blob-2"></div>

                    <Navbar
                        cartCount={cart.length}
                        searchQuery={searchQuery}
                        onSearchChange={setSearchQuery}
                        activeTab={activeTab}
                        onNavChange={handleNavChange}
                        onCartClick={() => setCartOpen(true)}
                        onProfileClick={() => setProfileOpen(true)}
                        theme={theme}
                        onThemeToggle={toggleTheme}
                        cartIconRef={cartIconRef}
                        cartPulse={cartPulse}
                        onCategoryMenuToggle={() => setIsCategoryMenuOpen(!isCategoryMenuOpen)}
                        isCategoryMenuOpen={isCategoryMenuOpen}
                        showSearch={showSearch}
                        setShowSearch={setShowSearch}
                    />

                    <CategoryDrawer
                        isOpen={isCategoryMenuOpen}
                        onClose={() => setIsCategoryMenuOpen(false)}
                        onCategorySelect={handleCategorySelect}
                        activeTab={activeTab}
                    />

                    {activeTab === "home" && <BannerCarousel onCategorySelect={handleCategorySelect} />}

                    {activeTab === "about" ? (
                        <AboutSection />
                    ) : (
                        <ProductGrid
                            products={visibleProducts}
                            onOpen={handleOpenProduct}
                            onAddToCart={handleAddToCart}
                            title={gridTitle}
                            subtitle={gridSubtitle}
                            onToggleWishlist={handleToggleWishlist}
                            wishlist={wishlist}
                        />
                    )}

                    <footer className="py-10 border-t border-white/10">
                        <div className="max-w-7xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center gap-4 text-xs text-gray-500 uppercase tracking-[0.25em]">
                            <span> 2024 Gamma Studio</span>
                            <span>Designed for carry rituals</span>
                        </div>
                    </footer>

                    <ProductDetailModal
                        product={selectedProduct}
                        onClose={() => setSelectedProduct(null)}
                    />

                    <CartDrawer
                        open={cartOpen}
                        items={cart}
                        onClose={() => setCartOpen(false)}
                        onClear={() => setCart([])}
                        onCheckout={() => { setCheckoutOpen(true); setCartOpen(false); }}
                    />

                    <UserProfilePanel
                        isOpen={profileOpen}
                        onClose={() => setProfileOpen(false)}
                        onLogout={() => { setIsAuthed(false); setCurrentUser(null); }}
                        userName={currentUser?.name || "Guest User"}
                        userEmail={currentUser?.email || "user@gamma.com"}
                        orders={orders}
                        wishlist={wishlist}
                        onToggleWishlist={handleToggleWishlist}
                    />

                    <CheckoutPage
                        open={checkoutOpen}
                        items={cart}
                        onClose={() => setCheckoutOpen(false)}
                        onPlaceOrder={handlePlaceOrder}
                        currentUser={currentUser}
                    />

                    {flyingProducts.map(fp => (
                        <FlyingProduct
                            key={fp.id}
                            id={fp.id}
                            image={fp.image}
                            startX={fp.startX}
                            startY={fp.startY}
                            endX={fp.endX}
                            endY={fp.endY}
                            onComplete={removeFlyingProduct}
                        />
                    ))}

                    {/* Smart Search Bar */}
                    <SmartSearchBar
                        isOpen={showSearch}
                        onClose={() => setShowSearch(false)}
                        onProductSelect={handleOpenProduct}
                    />

                    {/* Chatbot */}
                    <Chatbot />

                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>

</html>